/*****************************************
 Author:  Kelly Lamb
 Date:    9/21/2013
 Updated: 3/15/2025
          Allow touch events for mobile swipe gestures
          Replace audio library with howler.js
 File(s): pacmanjr.js
          preload.js
          main.css
          index.html
 Version: 1.0.0
 Use the files by permission of the author
 only. Contact Kelly through email at
 klamb_online@hotmail.com

*****************************************/
var instruct = document.getElementById("instructions");
var splash   = document.getElementById("splash");
var stage    = document.getElementById("stage");
var mazeArea = document.getElementById("mazeArea");

/** Add Touch / Swipe Support **/
let startX, startY;

stage.addEventListener('touchstart', (e) => {
	startX = e.touches[0].clientX;
	startY = e.touches[0].clientY;
	e.preventDefault();
	return false;
});

stage.addEventListener('touchmove', (e) => {
	if (!startX || !startY)
	{
		e.preventDefault();
		return false;
	}

	const currentX = e.touches[0].clientX;
	const currentY = e.touches[0].clientY;

	const diffX = startX - currentX;
	const diffY = startY - currentY;

	// Check if swipe distance is significant enough
	if (Math.abs(diffX) > 50 || Math.abs(diffY) > 50)
	{
		// Determine swipe direction
		if (Math.abs(diffX) > Math.abs(diffY))
		{
			// Horizontal swipe
			if (diffX > 0)
			{
				PM.requestDir = 0; // Left swipe
			}
			else
			{
				PM.requestDir = 2; // Right swipe
			}
		}
		else
		{
			// Vertical swipe
			if (diffY > 0)
			{
				PM.requestDir = 3; // Up swipe
			}
			else
			{
				PM.requestDir = 1; // Down swipe
			}
		}
		// Reset start coordinates
		startX = null;
		startY = null;
	}
	e.preventDefault();
});

stage.addEventListener('touchend', (e) => {
	startX = null;
	startY = null;
	e.preventDefault();
	return false;
});

stage.onmousedown = function(event)
{
	return false;
	//trackMouseDown(event);
};

stage.onmouseup = function(event)
{
	return false;
};

stage.onmousemove = function(event)
{
	//return false;
	trackMouse(event);
};

stage.onclick = function(event)
{
	return false;
};

stage.onselectstart = function(event)
{
	return false;
};

stage.oncontextmenu = function(event)
{
	return false;
};

stage.ondragstart = function(event)
{
	return false;
};

if (document.addEventListener)
{
	document.addEventListener("keydown", trackKeyDown,false);
	document.addEventListener("keypress",trackKeyPress,false);
}
else if (document.attachEvent)
{
	document.attachEvent("onkeydown",  trackKeyDown);
	document.attachEvent("onkeypress", trackKeyPress);
}
else
{
	stage.onkeydown=  trackKeyDown;
	stage.onkeypress= trackKeyPress;
};

//Track Mouse
function trackMouse(event)
{
	//return false;
	if (1 == 0)
	{
		if (event == null) {event = window.event;}
		//var mouseX = (event.clientX - 113) - SS.left;
		//var mouseX = 648 - event.clientX;
		var mouseX = 560 - event.clientX;
		var mouseY = 700 - event.clientY;
		MAZE.moveMouse(mouseX,mouseY);
	}
};

function trackMouseDown(event)
{
	return false;
};

function trackKeyDown(e)
{
	if (1 == 1)
	{
		if (!e) {e = event;}
		var key = (e.which) ? e.which : e.keyCode;
		//alert(e.which + "," + e.keyCode + "," + e.charCode);

		switch(key)
		{
			case 32: GD.turnOn(); break;
			case 65: MAZE.displayNextLevel(true); break;
			case 66: MAZE.flashMaze(0); break;
			case 67: MAZE.scrollHome(); break;
			case 68: GS.setScared(); break;
			case 69: GS.setEaten(); break;
			case 70: ST.updateGoodies(1); break;
			case 71: GAME.setStatus(gsNewLevel); break;
			case 37: PM.requestDir = 0; break;  //Left
			case 38: PM.requestDir = 3; break;  //Up
			case 39: PM.requestDir = 2; break;  //Right
			case 40: PM.requestDir = 1; break;  //Down
			default: break;
		}
	}
};

function trackKeyPress(e)
{
	if (1 == 1)
	{
		//trackKeyDown(e);
	}
};

function sign(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };

// GHOST STATUSES
var gsAlive_AtHome      = 0;
var gsAlive_Eating      = 1;
var gsAlive_ExitHome    = 2;
var gsAlive_Random      = 3;
var gsAlive_Scared      = 4;
var gsEaten_EnterHome   = 5;
var gsEaten_SeekingHome = 6;
var gsInvisible         = 7;

// PACMAN STATUSES
var psAlive             = 0;
var psCaught            = 1;
var psDying             = 2;
var psInvisible         = 3;
var psReset             = 4;

// GOODIE STATUSES
var gsOff               = 0;
var gsShowScore         = 1;
var gsOn                = 2;

// GAME STATUSES
var gsPlay              = 0;
var gsNewLevel          = 1;
var gsNewGame           = 2;
var gsScrollHome        = 3;
var gsReset             = 4;
var gsGameOver          = 5;
var gsReady             = 6;
var gsFlashMaze         = 7;
var gsFlashCompleted    = 8;
var gsScrollCompleted   = 9;
var gsLevelCompleted    = 10;


// GAME SOUND EFFECTS
var SFX_ANGRY           = 0;
var SFX_BGGHOST         = 1;
var SFX_BGGHOSTEYES     = 2;
var SFX_EATGHOST        = 3;
var SFX_EATGOODIES      = 4;
var SFX_EATPILL1        = 5;
var SFX_EATPILL2        = 6;
var SFX_EATPILL3        = 7;
var SFX_EXTRALIFE       = 8;
var SFX_GOODIES         = 9;
var SFX_KILLED          = 10;
var SFX_NEWGAME         = 11;
var SFX_NEWLEVEL        = 12;
var SFX_NOSOUND         = 13;

var GOODIE_DELAY        = 5;
var GOODIE_DELAY2       = 40;

var SCORE_DELAY         = 400;
var FLASH_DELAY         = 50;

var glTimer             = null;


var SpriteMovement1 = [ [-1,0], [0,1], [1,0], [0,-1] ];
var SpriteMovement2 = [ [-2,0], [0,2], [2,0], [0,-2] ];

var RandomValues    = [[2,3,0,1], [0,3,2,1], [1,0,3,2], [3,2,1,0]];
var ConvertDir      = [1,2,4,8];
var ConvertDirNoBT  = [4,8,1,2];

var GhostImages     = [ ['go0.png','go1.png'], ['gc0.png','gc1.png'], ['gp0.png','gp1.png'], ['gr0.png','gr1.png'], ['gb0.png','gb1.png'], ['gw0.png','gw1.png'] ];
var GhostEyeImages  = 'gel.png,ged.png,ger.png,geu.png,ges0.png,ges1.png'.split(',');

var GoodieImages    = 'goodie00.png,goodie01.png,goodie02.png,goodie03.png,goodie04.png,goodie05.png,goodie06.png,goodie07.png,goodie08.png,goodie09.png,goodie10.png,goodie11.png,goodie12.png,goodie13.png,goodie14.png'.split(',');

var MazeDotImages   = [ ['00.png','01.png','02.png','03.png'], ['00.png','01a.png','02a.png','03a.png'],['00.png','01b.png','02b.png','03b.png'] ];

var MazePieceBlue   = '00.png,00.png,00.png,00.png,b04.png,b05.png,b06.png,b07.png,b08.png,b09.png,b10.png,b11.png,b12.png,b13.png,b14.png,b15.png,b16.png,b17.png,b18.png,b19.png,b20.png,b21.png,b22.png,b23.png,b24.png,b25.png,b26.png,b27.png,b28.png,b29.png,b30.png,b31.png,32.png,b33.png,b34.png,b35.png,b36.png,37.png,b38.png,b39.png'.split(',');
var MazePieceOrange = '00.png,00.png,00.png,00.png,o04.png,o05.png,o06.png,o07.png,o08.png,o09.png,o10.png,o11.png,o12.png,o13.png,o14.png,o15.png,o16.png,o17.png,o18.png,o19.png,o20.png,o21.png,o22.png,o23.png,o24.png,o25.png,o26.png,o27.png,o28.png,o29.png,o30.png,o31.png,32.png,o33.png,o34.png,o35.png,o36.png,37.png,o38.png,o39.png'.split(',');
var MazePieceImages = [MazePieceBlue,MazePieceOrange];

var PMUp            = 'pu0.png,pu1.png,pu2.png,pu3.png,pu4.png,pu4.png,pu5.png,pu5.png,pu2.png,pu1.png'.split(',');
var PMDown          = 'pd0.png,pd1.png,pd2.png,pd3.png,pd4.png,pd4.png,pd5.png,pd5.png,pd2.png,pd1.png'.split(',');
var PMLeft          = 'pl0.png,pl1.png,pl2.png,pl3.png,pl4.png,pl4.png,pl5.png,pl5.png,pl2.png,pl1.png'.split(',');
var PMRight         = 'pr0.png,pr1.png,pr2.png,pr3.png,pr4.png,pr4.png,pr5.png,pr5.png,pr2.png,pr1.png'.split(',');
var PMShrink        = 'ps0.png,ps1.png,ps2.png,ps3.png,ps4.png,ps5.png,ps6.png,ps7.png,ps7.png,ps7.png,ps8.png'.split(',');
var PacManJrImages  = [PMLeft,PMDown,PMRight,PMUp,PMShrink];

var PhraseImages    = 'ready.png,gameover.png'.split(',');

var ScoresUpImages  = 'su00.png,su01.png,su02.png,su03.png,su04.png,su05.png,su06.png,su07.png,su08.png,su09.png,su10.png'.split(',');

var PIECE_SIZE = 20;
var MAZE_HOME  = -260;

Scoreboard = function()
{
	this.score = [40000,0,0]; //highscore,player1,player2
	this.extraLife = 10000;

	this.init = function()
	{
		this.score[1] = 0;
		this.score[2] = 0;
		this.extraLife = 10000;
		this.display();
	};

	this.updateScore = function(player,points)
	{
		var s = this.score[player];
		s = s + points;
		this.score[player] = s;

		var h = this.score[0];
		if (s > h)
		{
			this.score[0] = s;
		}
		if (s > this.extraLife)
		{
			ST.updateLives(1);
			this.extraLife = this.extraLife + 10000;
		}
		this.display();
	};

	this.display = function()
	{
		highScore.innerText = this.score[0];
		score1.innerText = this.score[1];
		score2.innerText = this.score[2];
	};
	this.init();
};

Status = function()
{
	this.lives = 0;
	this.index = 2;
	this.delay = 0;
	this.level = 1;

	this.init = function()
	{
		this.lives = 2;
		this.level = 1;

		this.updateLives(0);
		this.updateGoodies(0);
	};

	this.updateGoodies = function(amount)
	{
		this.level = this.level + amount;
	
		for (var x=1; x <= 7; x++)
		{
			var obj = document.getElementById("gc"+x);
			obj.style.visibility="hidden";
		}

		for (var x=1; x <= Math.min(7,this.level); x++)
		{
			var obj = document.getElementById("gc"+x);
			obj.style.visibility="visible";
		}
	};

	this.getLives = function()
	{
		return this.lives;
	};

	this.updateLives = function(amount)
	{
		if (amount >= 1)
		{
			FX.play(SFX_EXTRALIFE);
		}

		this.lives = this.lives + amount;

		if (this.lives < 1)
		{
			livesCount.innerText="";
			lc1.style.visibility="hidden";
		}
		else
		{
			livesCount.innerText=this.lives;
	
			for (var x=1; x <= 5; x++)
			{
				var obj = document.getElementById("lc"+x);
				obj.style.visibility="hidden";
			}

			for (var x=1; x <= Math.min(5,this.lives); x++)
			{
				var obj = document.getElementById("lc"+x);
				obj.style.visibility="visible";
			}
		}
	};

	this.animateLives = function()
	{
		this.delay++;
		if (this.delay <= 10)
		{
			return;
		}
		this.delay = 0;
		this.index++;
		this.index = (this.index % 10);
		for (var x=1; x <= Math.min(5,this.lives); x++)
		{
			var obj = document.getElementById("lc"+x);
			obj.src='images/'+PMRight[this.index];
		}
	};
	this.init();
};

Level = function()
{
	this.level	= 0;
	this.callback	= null;
	this.cb_dX	= 0;
	this.cb_dY	= 0;

	this.bgColor = 'blue,orange,cyan,green,darkblue,orange,darkblue'.split(',');
	this.bColor  = [1,0,1,1,0,0,1];
	this.dColor  = [1,0,0,2,2,0,1];
	
	this.dotCount = 
	[
		554,550,532,530,542,516,544
	];

	this.powerPills =
	[
		[	[ 1,4], [ 1,25], [16,13], [37,13], [52, 4], [52,25]	],
		[	[ 1,6], [ 1,26], [16,13], [37,13], [52, 6], [52,26]	],
		[	[ 1,4], [ 1,26], [16, 7], [37, 7], [52, 4], [52,26]	],
		[	[ 1,4], [ 1,28], [13,13], [40,13], [52, 4], [52,28]	],
		[	[ 4,4], [10,25], [16,13], [37,13], [43,25], [49, 4]	],
		[	[10,7], [ 7,22], [46,22], [43, 7]			],
		[	[ 7,7], [ 7,22], [46, 7], [46,22]			]
	];

	this.config =
	[
		[
			[  4,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  5 ],
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65,   1,   1,   1, 129, 129,  65,  24,  25,  65,   1,   1, 129, 129, 129,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ],
			[  8,  65,  20,  21,  65,  20,  26,  26,  26,  21,  65,  20,  21,  65,  24,  25, 193,  20,  21,  64,  20,  26,  26,  26,  21,  65,  24,  25,  65,  20,  26,  26,  26,  21,  64,  20,  21, 193,  24,  25,  65,  20,  21,  65,  20,  26,  26,  26,  21,  65,  20,  21,  65,  9 ],
			[  8,  65,  24,  25,  65,  22,  27,  27,  27,  23,  65,  24,  25,  65,  22,  23, 193,  24,  25,  64,  22,  27,  27,  30,  25,  65,  24,  25,  65,  24,  31,  27,  27,  23,  64,  24,  25, 193,  22,  23,  65,  24,  25,  65,  22,  27,  27,  27,  23,  65,  24,  25,  65,  9 ],
			[  8,  67,  24,  25, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,   1,   1,   1,  24,  25, 129, 129, 129,  65,  24,  25,  65,  24,  25,  65,  24,  25,  65,   1,   1,   1,  24,  25, 129, 129, 129,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,  24,  25,  67,  9 ],
			[  8,  65,  24,  25,  65,  20,  26,  26,  26,  21,  65,  24,  25,  65,  20,  26,  26,  28,  25, 193,  20,  21,  65,  24,  25,  65,  24,  25,  65,  24,  25,  65,  20,  21, 193,  24,  29,  26,  26,  21,  65,  24,  25,  65,  20,  26,  26,  26,  21,  65,  24,  25,  65,  9 ],
			[  8,  65,  22,  23,  65,  22,  27,  27,  27,  23,  65,  24,  25,  65,  24,  31,  27,  27,  23, 193,  24,  25,  65,  22,  23,  65,  22,  23,  65,  22,  23,  65,  24,  25, 193,  22,  27,  27,  30,  25,  65,  24,  25,  65,  22,  27,  27,  27,  23,  65,  22,  23,  65,  9 ],
			[  8, 129, 128, 128, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,  24,  25,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65,  24,  25,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,   0,   0,   1,  9 ],
			[  8, 193,  20,  21, 193,  20,  26,  26,  26,  21,  65,  24,  25,  65,  24,  25,  65,  20,  26,  26,  28,  25,  64,  20,  26,  26,  26,  26,  26,  26,  21,  64,  24,  29,  26,  26,  21,  65,  24,  25,  65,  24,  25,  65,  20,  26,  26,  26,  21, 193,  20,  21, 193,  9 ],
			[  8, 193,  24,  25, 193,  22,  27,  27,  30,  25,  65,  22,  23,  65,  22,  23,  65,  22,  27,  27,  27,  23,  64,  22,  27,  27,  27,  27,  27,  27,  23,  64,  22,  27,  27,  27,  23,  65,  22,  23,  65,  22,  23,  65,  24,  31,  27,  27,  23, 193,  24,  25, 193,  9 ],
			[  8, 193,  24,  25, 193, 129, 129,  65,  24,  25, 129, 128, 128, 129, 129, 129, 129, 129, 129, 129, 128, 128, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,   0,   0,   1,   1,   1,   1,   1,   1,   1,   0,   0,   1,  24,  25,  65,   1,   1, 193,  24,  25, 193,  9 ],
			[  8,  65,  24,  25, 193,  20,  21,  65,  24,  25, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  20,  21, 192,  33,  11,  38,  37,  37,  39,  11,  34, 192,  20,  21, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  24,  25,  65,  20,  21, 193,  24,  25,  65,  9 ],
			[  8,  65,  22,  23, 193,  24,  25,  65,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23,  65,  24,  25, 193,  22,  23,  65,  9 ],
			[  8, 129, 129, 129, 193,  24,  25, 129, 129, 129, 193,  24,  25, 129, 129, 129, 131, 129, 129, 193,  24,  25, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  24,  25, 193,   1,   1,   3,   1,   1,   1,  24,  25, 193,   1,   1,   1,  24,  25, 193,   1,   1,   1,  9 ],
			[  8, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  24,  25, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  24,  25, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  9 ],
			[  8,  65,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  22,  23, 192,  35,  10,  10,  10,  10,  10,  10,  36, 192,  22,  23, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23,  65,  9 ],
			[  8, 129, 128, 128, 129, 129, 129, 129, 129, 129, 193,  24,  25, 129, 129, 129, 129, 129, 129, 193, 128, 128, 192,   0,   0,   0,   0, 128, 128, 128, 128, 192,   0,   0, 193,   1,   1,   1,   1,   1,   1,  24,  25, 193,   1,   1,   1,   1,   1,   1,   0,   0,   1,  9 ],
			[  8, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  20,  21, 192,  20,  26,  26,  26,  21, 192,  20,  26,  26,  26,  26,  26,  26,  21, 192,  20,  26,  26,  26,  21, 192,  20,  21, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  9 ],
			[  8, 193,  24,  25, 193,  22,  27,  27,  30,  25, 193,  24,  25, 193,  24,  25, 192,  22,  27,  27,  27,  23, 192,  22,  27,  27,  30,  31,  27,  27,  23, 192,  22,  27,  27,  27,  23, 192,  24,  25, 193,  24,  25, 193,  24,  31,  27,  27,  23, 193,  24,  25, 193,  9 ],
			[  8, 193,  24,  25, 193, 129, 129,  65,  24,  25, 193,  24,  25, 193,  24,  25, 192, 128, 128, 129, 129, 129, 193,   1,   1,   1,  24,  25, 129, 129, 129, 193,   1,   1,   1,   0,   0, 192,  24,  25, 193,  24,  25, 193,  24,  25,  65,   1,   1, 193,  24,  25, 193,  9 ],
			[  8,  65,  24,  29,  26,  26,  21,  65,  24,  25, 193,  24,  25, 193,  24,  29,  26,  26,  21, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  20,  26,  26,  28,  25, 193,  24,  25, 193,  24,  25,  65,  20,  26,  26,  28,  25,  65,  9 ],
			[  8,  65,  22,  27,  27,  27,  23,  65,  22,  23, 193,  22,  23, 193,  22,  27,  27,  27,  23, 193,  22,  27,  27,  27,  23, 193,  22,  23, 193,  22,  27,  27,  27,  23, 193,  22,  27,  27,  27,  23, 193,  22,  23, 193,  22,  23,  65,  22,  27,  27,  27,  23,  65,  9 ],
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 193, 129, 129, 129, 129, 129, 193,   1,   1, 129, 129, 129, 193,   0, 128, 193,   1,   1,   1, 129, 129, 193,   1,   1,   1,   1,   1, 193,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ],
			[  8, 193,  20,  21, 193,  20,  26,  26,  26,  21, 192,  20,  26,  26,  26,  21, 193,  20,  21, 193,  20,  21, 192,  20,  26,  26,  26,  26,  26,  26,  21, 192,  20,  21, 193,  20,  21, 193,  20,  26,  26,  26,  21, 192,  20,  26,  26,  26,  21, 193,  20,  21, 193,  9 ],
			[  8, 193,  24,  25, 193,  24,  31,  27,  27,  23, 192,  22,  27,  27,  27,  23, 193,  24,  25, 193,  24,  25, 192,  22,  27,  27,  30,  31,  27,  27,  23, 192,  24,  25, 193,  24,  25, 193,  22,  27,  27,  27,  23, 192,  22,  27,  27,  30,  25, 193,  24,  25, 193,  9 ],
			[  8, 195,  24,  25, 193,  24,  25, 129, 129, 129, 193, 129, 129, 129, 128, 128, 193,  24,  25, 193,  24,  25, 193,   1,   1,   1,  24,  25, 129, 129, 129, 193,  24,  25, 193,  24,  25, 193,   0,   0,   1,   1,   1, 193,   1,   1,   1,  24,  25, 193,  24,  25, 195,  9 ],
			[  8,  65,  24,  25, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  24,  25, 193,  24,  25, 193,  20,  21, 193,  24,  25, 193,  20,  21, 193,  24,  25, 193,  24,  25, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  24,  25,  65,  9 ],
			[  8,  65,  22,  23, 193,  22,  23, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  22,  23, 193,  24,  25, 193,  22,  23, 193,  24,  25, 193,  22,  23, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  22,  23, 193,  22,  23,  65,  9 ],
			[  8, 129, 129, 129, 129, 129, 129, 193, 129, 129, 129, 129, 129, 193,  24,  25, 193,   1, 129, 193,   1, 129, 193,  24,  25, 193,   1, 129, 193,  24,  25, 193,   1, 129, 193,   1, 129, 193,  24,  25, 193,   1,   1,   1,   1,   1, 193,   1,   1,   1,   1,   1,   1,  9 ],
			[  6,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  7 ]
		],
		[
			[  0,   0,   0,   4,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,   5,   0,   0,  0 ], 
			[  0,   0,   0,   8, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,   1,   1,  65,   1,   1, 129, 129, 129,  65,   1,   1,   1,   1, 129, 129, 129, 129,  65,   1,   1,   1, 129, 129,  65,   1,   1,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,   9,   0,   0,  0 ], 
			[  0,   0,   0,   8,  65,  20,  26,  26,  26,  26,  26,  26,  21,  65,  20,  21,  65,  20,  26,  26,  26,  21,  65,  20,  26,  26,  26,  26,  26,  26,  21,  65,  20,  26,  26,  26,  21,  65,  20,  21,  65,  20,  26,  26,  26,  26,  26,  26,  21,  65,   9,   0,   0,  0 ], 
			[  4,  10,  10,  23,  65,  22,  27,  27,  27,  27,  27,  30,  25,  65,  24,  25,  65,  22,  27,  27,  27,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  27,  27,  27,  23,  65,  24,  25,  65,  24,  31,  27,  27,  27,  27,  27,  23,  65,  22,  10,  10,  5 ], 
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,  24,  25, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  24,  25,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  26,  26,  26,  26,  26,  26,  21,  65,  24,  25,  65,  24,  29,  26,  26,  26,  26,  26,  26,  26,  26,  21,  65,  24,  25,  65,  20,  26,  26,  26,  26,  26,  26,  26,  26,  28,  25,  65,  24,  25,  65,  20,  26,  26,  26,  26,  26,  26,  21, 193,  9 ], 
			[  8, 195,  22,  27,  27,  27,  27,  27,  30,  25,  65,  22,  23,  65,  22,  27,  27,  27,  27,  27,  27,  27,  27,  27,  23,  65,  24,  25,  65,  22,  27,  27,  27,  27,  27,  27,  27,  27,  27,  23,  65,  22,  23,  65,  24,  31,  27,  27,  27,  27,  27,  23, 195,  9 ], 
			[  8, 193,   1,   1,   1, 129, 129,  65,  24,  25, 129, 128, 128, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,   1,   1,   1,  24,  25, 129, 129, 129,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,   0,   0,   1,  24,  25,  65,   1,   1,   1,   1,   1, 193,  9 ], 
			[  8, 193,  20,  26,  26,  26,  21,  65,  24,  25, 193,  20,  21, 193,  20,  26,  26,  26,  26,  26,  26,  21,  65,  20,  26,  26,  28,  29,  26,  26,  21,  65,  20,  26,  26,  26,  26,  26,  26,  21, 193,  20,  21, 193,  24,  25,  65,  20,  26,  26,  26,  21, 193,  9 ], 
			[  8,  65,  22,  27,  27,  30,  25,  65,  24,  25, 193,  24,  25, 193,  22,  27,  27,  27,  27,  27,  30,  25,  65,  22,  27,  27,  27,  27,  27,  27,  23,  65,  24,  31,  27,  27,  27,  27,  27,  23, 193,  24,  25, 193,  24,  25,  65,  24,  31,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129,  65,  24,  25,  65,  24,  25, 193,  24,  25, 193, 129, 129, 129, 129, 129,  65,  24,  25, 129, 128, 128, 128, 128,   0,   0,   0,   0,   1,  24,  25,  65,   1,   1,   1,   1,   1, 193,  24,  25, 193,  24,  25,  65,  24,  25,  65,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21,  65,  24,  25,  65,  24,  25,  65,  24,  25, 193,  20,  21, 193,  20,  21,  65,  24,  25, 193,  33,  11,  38,  37,  37,  39,  11,  34, 193,  24,  25,  65,  20,  21, 193,  20,  21, 193,  24,  25,  65,  24,  25,  65,  24,  25,  65,  20,  21, 193,  9 ],
			[  8, 193,  24,  25,  65,  22,  23,  65,  22,  23,  65,  22,  23, 193,  24,  25, 193,  24,  25,  65,  24,  25, 193,   9,   0,   0,   0,   0,   0,   0,   8, 193,  24,  25,  65,  24,  25, 193,  24,  25, 193,  22,  23,  65,  22,  23,  65,  22,  23,  65,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 129, 129, 129, 129, 128, 128, 129, 129, 129, 193,  24,  25, 195,  24,  25,  65,  24,  25, 193,   9,   0,   0,   0,   0,   0,   0,   8, 193,  24,  25,  65,  24,  25, 195,  24,  25, 193,   1,   1,   1,   0,   0,   1,   1,   1,   1,  24,  25, 193,  9 ], 
			[  8, 193,  24,  29,  26,  26,  21, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  24,  25,  65,  24,  25, 193,   9,   0,   0,   0,   0,   0,   0,   8, 193,  24,  25,  65,  24,  25, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  20,  26,  26,  28,  25, 193,  9 ], 
			[  8, 193,  22,  27,  27,  30,  25, 193,  22,  27,  27,  30,  25, 193,  24,  25, 193,  24,  25,  65,  22,  23, 193,  35,  10,  10,  10,  10,  10,  10,  36, 193,  22,  23,  65,  24,  25, 193,  24,  25, 193,  24,  31,  27,  27,  23, 193,  24,  31,  27,  27,  23, 193,  9 ], 
			[  8, 129, 129, 129,  65,  24,  25, 193,   1,   1,  65,  24,  25, 193,  24,  25, 193,  24,  25, 129, 129, 129, 193,   0,   0,   0,   0, 128, 128, 128, 128, 193,   1,   1,   1,  24,  25, 193,  24,  25, 193,  24,  25,  65,   1,   1, 193,  24,  25,  65,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21,  65,  24,  29,  26,  26,  21,  65,  24,  25, 193,  24,  25,  65,  24,  29,  26,  26,  26,  26,  26,  21, 192,  20,  21, 192,  20,  26,  26,  26,  26,  26,  28,  25,  65,  24,  25, 193,  24,  25,  65,  20,  26,  26,  28,  25,  65,  20,  21, 193,  9 ], 
			[  8, 193,  24,  25,  65,  22,  27,  27,  30,  25,  65,  22,  23, 193,  24,  25,  65,  22,  27,  27,  27,  27,  27,  27,  23, 192,  24,  25, 192,  22,  27,  27,  27,  27,  27,  27,  23,  65,  24,  25, 193,  22,  23,  65,  24,  31,  27,  27,  23,  65,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 129, 129, 129,  65,  24,  25, 129, 129, 129, 193,  24,  25, 129, 129, 129, 129, 129, 129, 129, 128, 128, 192,  24,  25, 192,   0,   0,   1,   1,   1,   1,   1,   1,   1,  24,  25, 193,   1,   1,   1,  24,  25,  65,   1,   1,   1,  24,  25, 193,  9 ], 
			[  8,  65,  24,  25, 192,  20,  21,  65,  24,  29,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26,  28,  25,  65,  20,  21, 192,  24,  25,  65,  9 ], 
			[  8,  65,  22,  23, 192,  24,  25,  65,  22,  27,  27,  27,  23, 193,  22,  23, 193,  24,  32,  32,  32,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  32,  32,  32,  25, 193,  22,  23, 193,  22,  27,  27,  27,  23,  65,  24,  25, 192,  22,  23,  65,  9 ], 
			[  8, 129, 129, 129, 193,  24,  25, 129, 129, 129, 129, 129, 129, 193,   0,   0, 193,  24,  32,  32,  32,  25, 193,   1,   1,   1,   0, 128, 129, 129, 129, 193,  24,  32,  32,  32,  25, 193,   1,   1, 193,   1,   1,   1,   1,   1,   1,  24,  25, 193,   1,   1,   1,  9 ], 
			[ 19,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  24,  32,  32,  32,  25, 193,  20,  21, 193,  20,  21, 193,  20,  21, 193,  24,  32,  32,  32,  25, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26, 13 ], 
			[ 15,  27,  27,  23, 193,  24,  25, 193,  24,  31,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  30,  25, 193,  24,  25, 193,  22,  27,  27, 17 ], 
			[  8, 129, 129, 129, 193,  24,  25, 193,  24,  25, 129, 129, 129, 193,  24,  25, 193, 129, 129, 129, 129, 129, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,   1,   1,   1,   1,   1, 193,  24,  25, 193,   1,   1,   1,  24,  25, 193,  24,  25, 193,   1,   1,   1,  9 ], 
			[  8, 195,  20,  26,  26,  28,  25, 193,  24,  25, 193,  20,  21, 193,  24,  29,  26,  26,  21, 192,  20,  26,  26,  28,  25, 193,  24,  25, 193,  24,  29,  26,  26,  21, 192,  20,  26,  26,  28,  25, 193,  20,  21, 193,  24,  25, 193,  24,  29,  26,  26,  21, 195,  9 ], 
			[  8, 193,  22,  27,  27,  27,  23, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 192,  22,  27,  27,  27,  23, 193,  22,  23, 193,  22,  27,  27,  27,  23, 192,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  22,  27,  27,  27,  23, 193,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129, 193, 129, 129, 193,  24,  25, 193, 129, 129, 129, 129, 129, 193,   1,   1,   1, 129, 129, 193,   1, 129, 193,   1,   1, 129, 129, 129, 193,   1,   1,   1,   1,   1, 193,  24,  25, 193,   1,   1, 193,   1,   1,   1,   1,   1,   1,  9 ], 
			[  6,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  7 ]
		],
		[
			[  4,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  5 ], 
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65,   1,   1,   1,  24,  25, 129, 129, 129,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  26,  26,  26,  21, 193,  20,  21,  65,  20,  21,  65,  20,  21,  65,  24,  25,  65,  20,  21,  65,  20,  21,  65,  24,  25,  65,  20,  21,  65,  20,  21,  65,  24,  25,  65,  20,  21,  65,  20,  21,  65,  20,  21, 193,  20,  26,  26,  26,  21, 193,  9 ], 
			[  8, 193,  24,  31,  27,  27,  23, 193,  24,  25,  65,  24,  25,  65,  22,  23,  65,  22,  23,  65,  24,  25,  65,  22,  23,  65,  22,  23,  65,  22,  23,  65,  24,  25,  65,  22,  23,  65,  22,  23,  65,  24,  25,  65,  24,  25, 193,  22,  27,  27,  30,  25, 193,  9 ], 
			[  8, 195,  24,  25, 129, 129, 129, 193,  24,  25,  65,  24,  25, 129, 129, 129,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65,   1,   1,   1,  24,  25,  65,  24,  25, 193,   1,   1,   1,  24,  25, 195,  9 ], 
			[  8,  65,  24,  25,  65,  20,  26,  26,  28,  25,  65,  24,  29,  26,  26,  21,  65,  20,  26,  26,  28,  25,  64,  20,  26,  26,  26,  26,  26,  26,  21,  64,  24,  29,  26,  26,  21,  65,  20,  26,  26,  28,  25,  65,  24,  29,  26,  26,  21,  65,  24,  25,  65,  9 ], 
			[  8,  65,  22,  23,  65,  22,  27,  27,  30,  25,  65,  22,  27,  27,  27,  23,  65,  22,  27,  27,  30,  25,  64,  22,  27,  27,  30,  31,  27,  27,  23,  64,  24,  31,  27,  27,  23,  65,  22,  27,  27,  27,  23,  65,  24,  31,  27,  27,  23,  65,  22,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129, 129, 129, 129, 131, 128, 128,  64,  24,  25, 128, 128, 128,  64,  24,  25,  64,   0,   0,   0,  24,  25,  64,   0,   0,   3,   1,   1,   1,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  26,  26,  26,  21,  65,  24,  29,  26,  26,  21, 193,  20,  21, 193,  20,  21,  64,  24,  29,  26,  26,  21,  64,  24,  25,  64,  20,  26,  26,  28,  25,  64,  20,  21, 193,  20,  21, 193,  20,  26,  26,  28,  25,  65,  20,  26,  26,  26,  21, 193,  9 ], 
			[  8, 193,  22,  27,  27,  30,  25,  65,  22,  27,  27,  27,  23, 193,  24,  25, 193,  24,  25,  64,  22,  27,  27,  27,  23,  64,  22,  23,  64,  22,  27,  27,  27,  23,  64,  24,  25, 193,  24,  25, 193,  22,  27,  27,  27,  23,  65,  24,  31,  27,  27,  23, 193,  9 ], 
			[  8, 193, 129, 129,  65,  24,  25, 129, 129, 129, 129, 129, 129, 193,  24,  25, 193,  24,  25, 128, 128, 128, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,   0,   0,   0,  24,  25, 193,  24,  25, 193,   1,   1,   1,   1,   1,   1,  24,  25,  65,   1,   1, 193,  9 ], 
			[  8, 193,  20,  21,  65,  24,  29,  26,  26,  21, 193,  20,  26,  26,  28,  25,  65,  24,  29,  26,  26,  21, 192,  33,  11,  38,  37,  37,  39,  11,  34, 192,  20,  26,  26,  28,  25,  65,  24,  29,  26,  26,  21, 193,  20,  26,  26,  28,  25,  65,  20,  21, 193,  9 ],
			[  8, 193,  24,  25,  65,  24,  31,  27,  27,  23, 193,  22,  27,  27,  30,  25,  65,  22,  27,  27,  27,  23, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  22,  27,  27,  27,  23,  65,  24,  31,  27,  27,  23, 193,  22,  27,  27,  30,  25,  65,  24,  25, 193,  9 ], 
			[  8,  65,  24,  25,  65,  24,  25, 129, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129, 129, 128, 128, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,   0,   0,   1,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,   1,  24,  25,  65,  24,  25,  65,  9 ], 
			[  8,  65,  24,  25,  65,  24,  25, 193,  20,  26,  26,  26,  21,  65,  24,  29,  26,  26,  21, 193,  20,  21, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  20,  21, 193,  20,  26,  26,  28,  25,  65,  20,  26,  26,  26,  21, 193,  24,  25,  65,  24,  25,  65,  9 ], 
			[  8,  65,  22,  23,  65,  22,  23, 193,  22,  27,  27,  30,  25,  65,  22,  27,  27,  27,  23, 193,  24,  25, 192,  35,  10,  10,  10,  10,  10,  10,  36, 192,  24,  25, 193,  22,  27,  27,  27,  23,  65,  24,  31,  27,  27,  23, 193,  22,  23,  65,  22,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129, 193,   1,   1,   1,  24,  25, 129, 129, 129, 129, 129, 129, 193,  24,  25, 192,   0,   0,   0,   0, 128, 128, 128, 128, 192,  24,  25, 193,   1,   1,   1,   1,   1,   1,  24,  25, 129, 129, 129, 193,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  24,  29,  26,  26,  21, 193,  20,  26,  26,  28,  25, 192,  20,  26,  26,  26,  26,  26,  26,  21, 192,  24,  29,  26,  26,  21, 193,  20,  26,  26,  28,  25, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  9 ], 
			[  8, 193,  24,  25, 193,  22,  27,  27,  30,  25, 193,  24,  31,  27,  27,  23, 193,  22,  27,  27,  30,  25, 192,  22,  27,  27,  30,  31,  27,  27,  23, 192,  24,  31,  27,  27,  23, 193,  22,  27,  27,  30,  25, 193,  24,  31,  27,  27,  23, 193,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 193,   1,   1,  65,  24,  25, 193,  24,  25, 129, 129, 129, 193,   1,   1,   1,  24,  25, 192,   0,   0,   0,  24,  25, 128, 128, 128, 192,  24,  25, 129, 129, 129, 193,   1,   1,   1,  24,  25, 193,  24,  25,  65, 129, 129, 193,  24,  25, 193,  9 ], 
			[  8,  65,  24,  29,  26,  26,  21,  65,  24,  25,  65,  24,  25, 193,  20,  26,  26,  26,  21, 193,  24,  29,  26,  26,  21, 192,  24,  25, 192,  20,  26,  26,  28,  25, 193,  20,  26,  26,  26,  21, 193,  24,  25,  65,  24,  25,  65,  20,  26,  26,  28,  25,  65,  9 ], 
			[  8,  65,  22,  27,  27,  27,  23,  65,  22,  23,  65,  22,  23, 193,  22,  27,  27,  30,  25, 193,  22,  27,  27,  27,  23, 192,  22,  23, 192,  22,  27,  27,  27,  23, 193,  24,  31,  27,  27,  23, 193,  22,  23,  65,  22,  23,  65,  22,  27,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 193,   1,   1,   1,  24,  25, 193,   1, 129, 129, 129, 129, 193,   0, 128, 193,   1,   1,   1,   1, 129, 193,  24,  25, 129, 129, 129, 193,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ], 
			[ 19,  26,  26,  21, 193,  20,  21, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  24,  29,  26,  26,  21, 193,  20,  21, 193,  20,  21, 193,  20,  21, 193,  20,  26,  26,  28,  25, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  20,  21, 193,  20,  26,  26, 13 ], 
			[ 15,  27,  27,  23, 193,  24,  25, 193,  24,  25, 193,  22,  27,  27,  30,  25, 193,  24,  31,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  30,  25, 193,  24,  31,  27,  27,  23, 193,  24,  25, 193,  24,  25, 193,  22,  27,  27, 17 ], 
			[  8, 129, 129, 129, 193,  24,  25, 193,  24,  25, 193,   1,   1,   1,  24,  25, 193,  24,  25, 129, 129, 129, 193,  24,  25, 193,   1, 129, 193,  24,  25, 193,   1,   1,   1,  24,  25, 193,  24,  25, 129, 129, 129, 193,  24,  25, 193,  24,  25, 193,   1,   1,   1,  9 ], 
			[  8, 195,  20,  26,  26,  28,  25, 193,  24,  29,  26,  26,  21, 193,  24,  25,  65,  24,  25, 193,  20,  26,  26,  28,  25, 193,  20,  21, 193,  24,  29,  26,  26,  21, 193,  24,  25,  65,  24,  25, 193,  20,  26,  26,  28,  25, 193,  24,  29,  26,  26,  21, 195,  9 ], 
			[  8, 193,  22,  27,  27,  27,  23, 193,  22,  27,  27,  27,  23, 193,  22,  23,  65,  22,  23, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  22,  23,  65,  22,  23, 193,  22,  27,  27,  27,  23, 193,  22,  27,  27,  27,  23, 193,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129, 193, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 193, 129, 129, 129, 129, 129, 193,  24,  25, 193,   1,   1,   1,   1,   1, 193,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1, 193,   1,   1,   1,   1,   1,   1,  9 ], 
			[  6,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  7 ]
		],
		[
			[  0,   0,   0,   4,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,   5,   0,   0,  0 ], 
			[  0,   0,   0,   8, 129, 129, 129, 129, 129, 129,  65, 129, 129,  65,  24,  25, 129, 129, 129, 129, 129, 129,  65, 129, 129,  65,   1, 129,  65,   1,   1,  65,   1,   1,   1,   1,   1,   1,  24,  25,  65,   1,   1,  65,   1,   1,   1,   1,   1,   1,   9,   0,   0,  0 ], 
			[  0,   0,   0,   8, 193,  20,  21, 193,  20,  21,  64,  20,  21,  65,  24,  25, 193,  20,  21, 193,  20,  21,  65,  20,  21,  65,  20,  21,  65,  20,  21,  65,  20,  21, 193,  20,  21, 193,  24,  25,  65,  20,  21,  64,  20,  21, 193,  20,  21, 193,   9,   0,   0,  0 ], 
			[  4,  10,  10,  23, 193,  24,  25, 193,  24,  25,  64,  22,  23,  65,  22,  23, 193,  22,  23, 193,  24,  25,  65,  24,  25,  65,  24,  25,  65,  24,  25,  65,  24,  25, 193,  22,  23, 193,  22,  23,  65,  22,  23,  64,  24,  25, 193,  24,  25, 193,  22,  10,  10,  5 ], 
			[  8, 131, 129, 129, 193,  24,  25, 193,  24,  25,  65, 129, 129, 129, 128, 128, 129, 129, 129, 193,  24,  25,  65,  24,  25,  65,  24,  25,  65,  24,  25,  65,  24,  25, 193,   1,   1,   1,   0,   0,   1,   1,   1,  65,  24,  25, 193,  24,  25, 193,   1,   1,   3,  9 ], 
			[  8, 193,  20,  26,  26,  28,  25, 193,  24,  25,  65,  20,  26,  26,  26,  26,  26,  26,  26,  26,  28,  25,  65,  24,  25,  65,  24,  25,  65,  24,  25,  65,  24,  29,  26,  26,  26,  26,  26,  26,  26,  26,  21,  65,  24,  25, 193,  24,  29,  26,  26,  21, 193,  9 ], 
			[  8,  65,  22,  27,  27,  27,  23, 193,  24,  25,  65,  24,  31,  27,  27,  27,  27,  27,  27,  27,  27,  23,  65,  22,  23,  65,  24,  25,  65,  22,  23,  65,  22,  27,  27,  27,  27,  27,  27,  27,  27,  30,  25,  65,  24,  25, 193,  22,  27,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,  24,  25, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,  24,  25,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,  9 ], 
			[ 19,  26,  26,  26,  26,  26,  21,  65,  24,  25,  65,  24,  25, 193,  20,  26,  26,  26,  26,  26,  26,  26,  26,  26,  21,  64,  24,  25,  64,  20,  26,  26,  26,  26,  26,  26,  26,  26,  26,  21, 193,  24,  25,  65,  24,  25,  65,  20,  26,  26,  26,  26,  26, 13 ], 
			[ 15,  27,  27,  27,  27,  30,  25,  65,  24,  25,  65,  22,  23, 193,  22,  27,  27,  27,  27,  27,  30,  31,  27,  27,  23,  64,  22,  23,  64,  22,  27,  27,  30,  31,  27,  27,  27,  27,  27,  23, 193,  22,  23,  65,  24,  25,  65,  24,  31,  27,  27,  27,  27, 17 ], 
			[  8, 129, 129, 129,  65,  24,  25,  65,  24,  25, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  24,  25,  65,  24,  25,  65,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21,  65,  24,  25,  65,  24,  29,  26,  26,  21, 193,  20,  21, 193,  20,  21,  65,  24,  25, 192,  33,  11,  38,  37,  37,  39,  11,  34, 192,  24,  25,  65,  20,  21, 193,  20,  21, 193,  20,  26,  26,  28,  25,  65,  24,  25,  65,  20,  21, 193,  9 ],
			[  8, 193,  24,  25,  65,  22,  23,  65,  22,  27,  27,  27,  23, 193,  24,  25, 193,  24,  25,  65,  22,  23, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  22,  23,  65,  24,  25, 193,  24,  25, 193,  22,  27,  27,  27,  23,  65,  22,  23,  65,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 129, 129, 129, 129, 129, 129, 129, 129, 129, 195,  24,  25, 193,  24,  25, 129, 128, 128, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,   0,   0,   1,  24,  25, 193,  24,  25, 195,   1,   1,   1,   1,   1,   1,   1,   1,   1,  24,  25, 193,  9 ], 
			[  8,  65,  24,  29,  26,  26,  26,  26,  26,  26,  26,  26,  21, 193,  24,  25,  65,  24,  25, 193,  20,  21, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  20,  21, 193,  24,  25,  65,  24,  25, 193,  20,  26,  26,  26,  26,  26,  26,  26,  26,  28,  25,  65,  9 ], 
			[  8,  65,  22,  27,  27,  27,  27,  27,  27,  27,  27,  30,  25, 193,  24,  25,  65,  22,  23, 193,  24,  25, 192,  35,  10,  10,  10,  10,  10,  10,  36, 192,  24,  25, 193,  22,  23,  65,  24,  25, 193,  24,  31,  27,  27,  27,  27,  27,  27,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 193,  24,  25, 129, 129, 129, 193,  24,  25, 192,   0,   0,   0,   0, 128, 128, 128, 128, 192,  24,  25, 193,   1,   1,   1,  24,  25, 193,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8,  65,  20,  26,  26,  26,  26,  26,  26,  21,  65,  24,  25, 193,  24,  29,  26,  26,  26,  26,  28,  29,  26,  26,  21, 192,  20,  21, 192,  20,  26,  26,  28,  29,  26,  26,  26,  26,  28,  25, 193,  24,  25,  65,  20,  26,  26,  26,  26,  26,  26,  21,  65,  9 ], 
			[  8,  65,  22,  27,  27,  27,  27,  27,  30,  25,  65,  24,  25, 193,  22,  27,  27,  27,  27,  27,  27,  27,  27,  30,  25, 192,  24,  25, 192,  24,  31,  27,  27,  27,  27,  27,  27,  27,  27,  23, 193,  24,  25,  65,  24,  31,  27,  27,  27,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,  24,  25, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 192,  24,  25, 192,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  24,  25,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,  9 ], 
			[ 19,  26,  26,  26,  26,  26,  21,  65,  24,  25,  65,  24,  25, 193,  20,  26,  26,  26,  26,  26,  26,  21,  65,  24,  25, 192,  24,  25, 192,  24,  25,  65,  20,  26,  26,  26,  26,  26,  26,  21, 193,  24,  25,  65,  24,  25,  65,  20,  26,  26,  26,  26,  26, 13 ], 
			[ 15,  27,  27,  27,  27,  27,  23,  65,  22,  23,  65,  22,  23, 193,  22,  27,  27,  27,  27,  27,  30,  25,  65,  22,  23, 192,  22,  23, 192,  22,  23,  65,  24,  31,  27,  27,  27,  27,  27,  23, 193,  22,  23,  65,  22,  23,  65,  22,  27,  27,  27,  27,  27, 17 ], 
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 193,   0,   0, 129, 129, 129,  65,  24,  25, 129, 129, 129, 193,   0, 128, 193,   1,   1,   1,  24,  25,  65,   1,   1,   1, 128, 128, 193,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21, 193,  20,  21, 193,  20,  21, 193,  20,  21, 193,  20,  21,  65,  20,  21,  65,  24,  25, 192,  20,  21, 193,  20,  21, 193,  20,  21, 192,  24,  25,  65,  20,  21,  65,  20,  21, 193,  20,  21, 193,  20,  21, 193,  20,  21, 193,  20,  21, 193,  9 ], 
			[  8, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25,  65,  24,  25,  65,  24,  25, 192,  24,  25, 193,  24,  25, 193,  24,  25, 192,  24,  25,  65,  24,  25,  65,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25,  65,  24,  25,  65,  24,  25, 192,  24,  25, 193,  24,  25, 193,  24,  25, 192,  24,  25,  65,  24,  25,  65,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25,  65,  24,  25,  65,  24,  25, 192,  24,  25, 193,  24,  25, 193,  24,  25, 192,  24,  25,  65,  24,  25,  65,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  9 ], 
			[  8, 193,  22,  23, 193,  22,  23, 193,  22,  23, 193,  22,  23, 193,  24,  25,  65,  22,  23,  65,  22,  23, 192,  22,  23, 193,  24,  25, 193,  22,  23, 192,  22,  23,  65,  22,  23,  65,  24,  25, 193,  22,  23, 193,  22,  23, 193,  22,  23, 193,  22,  23, 193,  9 ], 
			[  8, 131, 129, 129, 129, 129, 129, 193, 129, 129, 193, 129, 129, 193,  24,  25, 129, 129, 129, 129, 129, 129, 192, 129, 129, 193,  24,  25, 193,   1,   1, 192,   1,   1,   1,   1,   1,   1,  24,  25, 193,   1,   1, 193,   1,   1, 193,   1,   1,   1,   1,   1,   3,  9 ], 
			[  6,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  7 ]
		],
		[
			[  4,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  5 ], 
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65,  24,  25,  65,   1,   1, 129, 129, 129,  65,   1, 129,  65,   1,   1,   1, 129, 129,  65,  24,  25,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8,  65,  20,  26,  26,  26,  21,  65,  20,  21,  65,  24,  25, 193,  20,  21,  65,  24,  25,  65,  20,  26,  26,  26,  21,  65,  20,  21,  65,  20,  26,  26,  26,  21,  65,  24,  25,  65,  20,  21, 193,  24,  25,  65,  20,  21,  65,  20,  26,  26,  26,  21,  65,  9 ], 
			[  8,  65,  22,  27,  27,  27,  23,  65,  24,  25,  65,  22,  23, 193,  24,  25,  65,  22,  23,  65,  22,  27,  27,  27,  23,  65,  24,  25,  65,  22,  27,  27,  27,  23,  65,  22,  23,  65,  24,  25, 193,  22,  23,  65,  24,  25,  65,  22,  27,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129, 131, 129, 129,  65,  24,  25,  65,   1,   1, 193,  24,  25,  65, 129, 129, 129, 129, 129,  65,   1,   1,   1,  24,  25, 129, 129, 129,  65,   1,   1,   1,   1,   1,  65,  24,  25, 193, 129, 129,  65,  24,  25,  65,   1,   1,   3,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21, 193,  20,  21,  65,  24,  25,  65,  20,  26,  26,  28,  25,  65,  20,  26,  26,  26,  21,  64,  20,  21, 193,  24,  25, 193,  20,  21,  64,  20,  26,  26,  26,  21,  65,  24,  29,  26,  26,  21,  65,  24,  25,  65,  20,  21, 193,  20,  21, 193,  9 ], 
			[  8, 193,  24,  25, 193,  24,  25,  65,  22,  23,  65,  22,  27,  27,  27,  23,  65,  22,  27,  27,  27,  23,  64,  24,  25, 193,  22,  23, 193,  24,  25,  64,  22,  27,  27,  27,  23,  65,  22,  27,  27,  27,  23,  65,  22,  23,  65,  24,  25, 193,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 193,  24,  25, 129, 128, 128, 129, 128, 128, 129, 129, 129, 129, 129, 129, 129, 128, 128,  64,  24,  25, 193,   1, 129, 193,  24,  25,  64,   0,   0,   1,   1,   1,   1,   1,   1,   1,   0,   0,   1,   0,   0,   1,  24,  25, 193,  24,  25, 193,  9 ], 
			[  8,  65,  24,  25,  65,  24,  25, 193,  20,  21, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  20,  21,  64,  24,  29,  26,  26,  26,  26,  28,  25,  64,  20,  21, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  20,  21, 193,  24,  25,  65,  24,  25,  65,  9 ], 
			[  8,  65,  22,  23,  65,  22,  23, 193,  24,  25, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25,  64,  22,  27,  27,  27,  27,  27,  27,  23,  64,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  24,  25, 193,  22,  23,  65,  22,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 128, 128, 193,  24,  25, 193,  24,  25, 129, 129, 129, 129, 129, 129, 193,  24,  25, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,  24,  25, 193,   1,   1,   1,   1,   1,   1,  24,  25, 193,  24,  25, 193,   0,   0,   1,   1,   1,   1,  9 ], 
			[ 19,  26,  26,  21, 193,  20,  21,  65,  24,  25,  65,  24,  25, 193,  20,  21, 193,  20,  21,  65,  24,  25, 192,  33,  11,  38,  37,  37,  39,  11,  34, 192,  24,  25,  65,  20,  21, 193,  20,  21, 193,  24,  25,  65,  24,  25,  65,  20,  21, 193,  20,  26,  26, 13 ], 
			[ 15,  27,  27,  23, 193,  24,  25,  65,  22,  23,  65,  22,  23, 193,  24,  25, 193,  24,  25,  65,  22,  23, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  22,  23,  65,  24,  25, 193,  24,  25, 193,  22,  23,  65,  22,  23,  65,  24,  25, 193,  22,  27,  27, 17 ], 
			[  8, 129, 129, 129, 193,  24,  25, 129, 128, 128, 129, 128, 128, 193,  24,  25, 195,  24,  25, 129, 128, 128, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,   0,   0,   1,  24,  25, 195,  24,  25, 193,   0,   0,   1,   0,   0,   1,  24,  25, 193,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21,  65,  24,  25, 193,  20,  21, 193,  20,  21,  65,  24,  25,  65,  24,  25, 193,  20,  21, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  20,  21, 193,  24,  25,  65,  24,  25,  65,  20,  21, 193,  20,  21, 193,  24,  25,  65,  20,  21, 193,  9 ], 
			[  8, 193,  24,  25,  65,  22,  23, 193,  24,  25, 193,  24,  25,  65,  22,  23,  65,  22,  23, 193,  24,  25, 192,  35,  10,  10,  10,  10,  10,  10,  36, 192,  24,  25, 193,  22,  23,  65,  22,  23,  65,  24,  25, 193,  24,  25, 193,  22,  23,  65,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 129, 128, 128, 193,  24,  25, 193,  24,  25, 129, 129, 129, 129, 129, 129, 193,  24,  25, 192,   0,   0,   0,   0, 128, 128, 128, 128, 192,  24,  25, 193,   1,   1,   1,   1,   1,   1,  24,  25, 193,  24,  25, 193,   0,   0,   1,  24,  25, 193,  9 ], 
			[  8,  65,  24,  25, 193,  20,  21,  65,  24,  25,  65,  24,  25, 193,  20,  26,  26,  26,  21, 193,  24,  29,  26,  26,  21, 192,  20,  21, 192,  20,  26,  26,  28,  25, 193,  20,  26,  26,  26,  21, 193,  24,  25,  65,  24,  25,  65,  20,  21, 193,  24,  25,  65,  9 ], 
			[  8,  65,  22,  23, 193,  24,  25,  65,  22,  23,  65,  22,  23, 193,  22,  27,  27,  27,  23, 193,  22,  27,  27,  27,  23, 192,  24,  25, 192,  22,  27,  27,  27,  23, 193,  22,  27,  27,  27,  23, 193,  22,  23,  65,  22,  23,  65,  24,  25, 193,  22,  23,  65,  9 ], 
			[  8, 129, 129, 129, 193,  24,  25, 129, 129, 129, 129, 128, 128, 129, 129, 129, 129, 129, 129, 193,   0,   0, 128, 128, 128, 192,  24,  25, 192,   0,   0,   0, 128, 128, 193,   1,   1,   1,   1,   1,   1,   0,   0,   1,   1,   1,   1,  24,  25, 193,   1,   1,   1,  9 ], 
			[ 19,  26,  26,  21,  65,  24,  25, 193,  20,  21, 193,  20,  26,  26,  26,  21, 192,  20,  26,  26,  26,  21, 192,  20,  26,  26,  28,  29,  26,  26,  21, 192,  20,  26,  26,  26,  21, 192,  20,  26,  26,  26,  21, 193,  20,  21, 193,  24,  25,  65,  20,  26,  26, 13 ], 
			[ 15,  27,  27,  23,  65,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 192,  22,  27,  27,  27,  23, 192,  22,  27,  27,  27,  27,  27,  27,  23, 192,  22,  27,  27,  27,  23, 192,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23,  65,  22,  27,  27, 17 ], 
			[  8, 129, 129, 129, 129, 129, 129, 193,  24,  25, 129, 129, 129, 129, 129, 129, 193,   1,   1, 129, 129, 129, 193,   0,   0,   0,   0, 128, 128, 128, 128, 193,   1,   1,   1, 129, 129, 193,   1,   1,   1,   1,   1,   1,  24,  25, 193,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  20,  26,  26,  26,  26,  26,  26,  21, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  9 ], 
			[  8, 193,  24,  31,  27,  27,  23, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  30,  31,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  22,  27,  27,  30,  25, 193,  9 ], 
			[  8, 193,  24,  25, 129, 129, 129, 129, 129, 129, 195,  24,  25, 193,   0,   0, 129, 129, 129, 193,  24,  25, 193,   1,   1,   1,  24,  25, 129, 129, 129, 193,  24,  25, 193,   1,   1,   1, 128, 128, 193,  24,  25, 195,   1,   1,   1,   1,   1,   1,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  20,  21, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  24,  25, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  20,  21, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  9 ], 
			[  8, 193,  22,  23, 193,  22,  27,  27,  27,  23, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  22,  23, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  22,  27,  27,  27,  23, 193,  22,  23, 193,  9 ], 
			[  8, 129, 129, 129, 193, 129, 129, 129, 129, 129, 193, 129, 129, 193,  24,  25, 193,   1,   1,   1,   1, 129, 129, 129, 129, 193,   1, 129, 193,   1,   1,   1,   1, 129, 129, 129, 129, 193,  24,  25, 193,   1,   1, 193,   1,   1,   1,   1,   1, 193,   1,   1,   1,  9 ], 
			[  6,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  7 ]
		],
		[
			[  4,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  5 ], 
			[  8, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65, 129, 129,  65,  24,  25, 129, 129, 129,  65, 129, 129,  65,   1,   1,   1,  24,  25, 129, 129, 129,  65,   1,   1,  65,   1,   1,   1,  24,  25,  65,   1,   1,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,  9 ], 
			[  8,  65,  20,  21,  65,  24,  25, 193,  20,  21,  65,  20,  21,  65,  24,  25, 193,  20,  21,  65,  20,  21,  65,  20,  21, 193,  24,  25, 193,  20,  21,  65,  20,  21,  65,  20,  21, 193,  24,  25,  65,  20,  21,  65,  20,  21, 193,  24,  25,  65,  20,  21,  65,  9 ], 
			[  8,  65,  24,  25,  65,  22,  23, 193,  24,  25,  65,  24,  25,  65,  22,  23, 193,  24,  25,  65,  24,  25,  65,  24,  25, 193,  22,  23, 193,  24,  25,  65,  24,  25,  65,  24,  25, 193,  22,  23,  65,  24,  25,  65,  24,  25, 193,  22,  23,  65,  24,  25,  65,  9 ], 
			[  8,  65,  24,  25, 129, 129, 129, 193,  24,  25,  65,  24,  25, 129, 129, 129, 193,  24,  25,  65,  24,  25,  65,  24,  25, 193,   1, 129, 193,  24,  25,  65,  24,  25,  65,  24,  25, 193,   1,   1,   1,  24,  25,  65,  24,  25, 193,   1,   1,   1,  24,  25,  65,  9 ], 
			[  8,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  24,  25,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  24,  25,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  9 ], 
			[  8,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129,  65,  24,  25, 129, 129, 129, 131, 129, 129,  65,  24,  25, 129, 129, 129, 129, 129, 129, 129, 128, 128,  64,  24,  25,  64,   0,   0,   1,   1,   1,   1,   1,   1,   1,  24,  25,  65,   1,   1,   3,   1,   1,   1,  24,  25,  65,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21,  65,  24,  25, 193,  20,  21, 193,  20,  21,  65,  24,  25, 193,  20,  21, 193,  20,  26,  26,  26,  21,  64,  24,  25,  64,  20,  26,  26,  26,  21, 193,  20,  21, 193,  24,  25,  65,  20,  21, 193,  20,  21, 193,  24,  25,  65,  20,  21, 193,  9 ], 
			[  8, 193,  24,  25,  65,  22,  23, 193,  24,  25, 193,  24,  25,  65,  22,  23, 193,  24,  25, 193,  24,  31,  27,  27,  23,  64,  22,  23,  64,  22,  27,  27,  30,  25, 193,  24,  25, 193,  22,  23,  65,  24,  25, 193,  24,  25, 193,  22,  23,  65,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 129, 129, 129, 193,  24,  25, 193,  24,  25, 129, 129, 129, 193,  24,  25, 193,  24,  25, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,  24,  25, 193,  24,  25, 193,   1,   1,   1,  24,  25, 193,  24,  25, 193,   1,   1,   1,  24,  25, 193,  9 ], 
			[  8,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  24,  25, 192,  33,  11,  38,  37,  37,  39,  11,  34, 192,  24,  25,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  24,  29,  26,  26,  26,  26,  28,  25,  65,  9 ],
			[  8,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  23, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  22,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  22,  27,  27,  30,  31,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129,  65,  24,  25, 129, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129, 129, 128, 128, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,   0,   0,   1,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,   1,  24,  25,  65,   1,   1,   1,  9 ], 
			[ 19,  26,  26,  21,  65,  24,  25, 193,  20,  26,  26,  26,  21,  65,  24,  25, 193,  20,  26,  26,  26,  21, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  20,  26,  26,  26,  21, 193,  24,  25,  65,  20,  26,  26,  26,  21, 193,  24,  25,  65,  20,  26,  26, 13 ], 
			[ 15,  27,  27,  23,  65,  22,  23, 193,  24,  31,  27,  27,  23,  65,  22,  23, 193,  22,  27,  27,  30,  25, 192,  35,  10,  10,  10,  10,  10,  10,  36, 192,  24,  31,  27,  27,  23, 193,  22,  23,  65,  22,  27,  27,  30,  25, 193,  22,  23,  65,  22,  27,  27, 17 ], 
			[  8, 129, 129, 129, 129, 129, 129, 193,  24,  25, 129, 129, 129, 129, 128, 128, 193,   1,   1,   1,  24,  25, 192,   0,   0,   0,   0, 128, 128, 128, 128, 192,  24,  25, 129, 129, 129, 193,   0,   0,   1,   1,   1,   1,  24,  25, 193,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  21, 193,  20,  26,  26,  28,  25, 193,  20,  26,  26,  26,  26,  26,  26,  21, 193,  24,  29,  26,  26,  21, 192,  20,  21, 192,  20,  26,  26,  28,  25, 193,  20,  26,  26,  26,  26,  26,  26,  21, 193,  24,  29,  26,  26,  21, 193,  20,  21, 193,  9 ], 
			[  8, 193,  24,  25,  65,  22,  27,  27,  30,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  31,  27,  27,  23, 192,  24,  25, 192,  22,  27,  27,  30,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  31,  27,  27,  23,  65,  24,  25, 193,  9 ], 
			[  8, 193,  24,  25, 129, 129, 129,  65,  24,  25, 193,   1,   1, 129, 128, 128, 129, 129, 129, 193,  24,  25, 128, 128, 128, 192,  24,  25, 192,   0,   0,   0,  24,  25, 193,   1,   1,   1,   0,   0,   1, 129, 129, 193,  24,  25,  65,   1,   1,   1,  24,  25, 193,  9 ], 
			[  8,  65,  24,  25, 193,  20,  21,  65,  24,  29,  26,  26,  21, 193,  20,  21, 193,  20,  26,  26,  28,  25, 192,  20,  26,  26,  28,  29,  26,  26,  21, 192,  24,  29,  26,  26,  21, 193,  20,  21, 193,  20,  26,  26,  28,  25,  65,  20,  21, 193,  24,  25,  65,  9 ], 
			[  8,  65,  22,  23, 193,  24,  25,  65,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 192,  24,  31,  27,  27,  27,  27,  30,  25, 192,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23,  65,  24,  25, 193,  22,  23,  65,  9 ], 
			[  8, 129, 129, 129, 193,  24,  25, 131, 129, 129, 129, 129, 129, 193,  24,  25, 193,   1,   1,   1, 129, 129, 193,  24,  25,  64,   0, 128,  64,  24,  25, 193,   1,   1, 129, 129, 129, 193,  24,  25, 193,   1,   1,   1,   1,   1,   3,  24,  25, 193,   1,   1,   1,  9 ], 
			[  8,  65,  20,  26,  26,  28,  25, 193,  20,  21, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  20,  21, 193,  24,  25,  64,  20,  21,  64,  24,  25, 193,  20,  21, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  20,  21, 193,  24,  29,  26,  26,  21,  65,  9 ], 
			[  8,  65,  22,  27,  27,  27,  23, 193,  24,  25, 193,  24,  31,  27,  27,  27,  27,  30,  25, 193,  24,  25, 193,  22,  23,  64,  24,  25,  64,  22,  23, 193,  24,  25, 193,  24,  31,  27,  27,  27,  27,  30,  25, 193,  24,  25, 193,  22,  27,  27,  27,  23,  65,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129, 193,  24,  25, 193,  24,  25, 129, 129, 129,  65,  24,  25, 193,  24,  25, 193,   1,   1,   1,  24,  25, 129, 129, 129, 193,  24,  25, 193,  24,  25,  65,   1,   1,   1,  24,  25, 193,  24,  25, 193,   1,   1,   1,   1,   1,   1,  9 ], 
			[  8, 193,  20,  26,  26,  26,  21, 193,  24,  25, 193,  24,  25, 193,  20,  21,  65,  24,  25, 193,  24,  25, 193,  20,  26,  26,  28,  29,  26,  26,  21, 193,  24,  25, 193,  24,  25,  65,  20,  21, 193,  24,  25, 193,  24,  25, 193,  20,  26,  26,  26,  21, 193,  9 ], 
			[  8, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  24,  25,  65,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23,  65,  24,  25, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  9 ], 
			[  8, 129, 129, 129, 129, 129, 129, 193,  24,  25, 193,   1, 129, 193,  24,  25, 129, 129, 129, 193,  24,  25, 193,   1,   1,   1,   1, 129, 129, 129, 129, 193,  24,  25, 193,   1,   1,   1,  24,  25, 193,   1, 129, 193,  24,  25, 193,   1,   1,   1,   1,   1,   1,  9 ], 
			[  6,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  7 ]
		],
		[
			[  4,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  12,  16,  10,  10,  10,  10,  10,  10,  10,  10,  10,  10,  5 ],
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65,  24,  25, 129, 129, 129,  65,  24,  25,  65,   1, 129,  65,  24,  25,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ],
			[  8,  65,  20,  26,  26,  26,  26,  26,  26,  21,  65,  24,  25,  65,  20,  21,  65,  24,  25,  65,  20,  21,  65,  24,  25,  65,  20,  21,  65,  24,  25,  65,  20,  21,  65,  24,  25,  65,  20,  21,  65,  24,  25,  65,  20,  26,  26,  26,  26,  26,  26,  21,  65,  9 ],
			[  8,  65,  24,  31,  27,  27,  27,  27,  30,  25,  65,  24,  25,  65,  24,  25,  65,  22,  23,  65,  24,  25,  65,  22,  23,  65,  24,  25,  65,  22,  23,  65,  24,  25,  65,  22,  23,  65,  24,  25,  65,  24,  25,  65,  24,  31,  27,  27,  27,  27,  30,  25,  65,  9 ],
			[  8,  65,  24,  25,  65, 129, 129,  65,  24,  25,  65,  24,  25,  65,  24,  25, 129, 128, 128,  65,  24,  25, 129, 129, 129,  65,  24,  25,  65,   1,   1,   1,  24,  25,  65,   0,   0,   1,  24,  25,  65,  24,  25,  65,  24,  25,  65,   1,   1,  65,  24,  25,  65,  9 ],
			[  8,  65,  24,  25,  65,  20,  21,  65,  24,  25,  65,  24,  25,  65,  24,  25, 193,  20,  21,  65,  24,  29,  26,  26,  21,  65,  24,  25,  65,  20,  26,  26,  28,  25,  65,  20,  21, 193,  24,  25,  65,  24,  25,  65,  24,  25,  65,  20,  21,  65,  24,  25,  65,  9 ],
			[  8,  65,  24,  25,  65,  22,  23,  65,  22,  23,  65,  24,  25,  65,  22,  23, 193,  24,  25,  65,  22,  27,  27,  27,  23,  65,  24,  25,  65,  22,  27,  27,  27,  23,  65,  24,  25, 193,  22,  23,  65,  24,  25,  65,  22,  23,  65,  22,  23,  65,  24,  25,  65,  9 ],
			[  8,  65,  24,  25, 129, 129, 129,  67, 129, 129,  65,  24,  25,  65, 129, 129, 193,  24,  25, 129, 129, 129, 129, 129, 129,  65,  24,  25,  65,   1,   1,   1,   1,   1,   1,  24,  25, 193,   1,   1,  65,  24,  25,  65,   1,   1,  67,   1,   1,   1,  24,  25,  65,  9 ],
			[  8,  65,  24,  29,  26,  26,  21,  65,  20,  21,  65,  24,  25,  65,  20,  26,  26,  28,  25, 193,  20,  26,  26,  26,  21,  64,  24,  25,  64,  20,  26,  26,  26,  21, 193,  24,  29,  26,  26,  21,  65,  24,  25,  65,  20,  21,  65,  20,  26,  26,  28,  25,  65,  9 ],
			[  8,  65,  22,  27,  27,  27,  23,  65,  22,  23,  65,  22,  23,  65,  22,  27,  27,  30,  25, 193,  24,  31,  27,  27,  23,  64,  22,  23,  64,  22,  27,  27,  30,  25, 193,  24,  31,  27,  27,  23,  65,  22,  23,  65,  22,  23,  65,  22,  27,  27,  27,  23,  65,  9 ],
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 193,  24,  25, 128, 128, 128, 128, 128,   0,   0,   0,   0,   0,  24,  25, 193,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ],
			[ 19,  26,  26,  26,  26,  26,  26,  26,  26,  21, 193,  20,  21,  65,  20,  21,  65,  24,  25,  65,  24,  25, 192,  33,  11,  38,  37,  37,  39,  11,  34, 192,  24,  25,  65,  24,  25,  65,  20,  21,  65,  20,  21, 193,  20,  26,  26,  26,  26,  26,  26,  26,  26, 13 ],
			[ 15,  27,  27,  27,  27,  27,  27,  27,  30,  25, 193,  24,  25,  65,  22,  23,  65,  22,  23,  65,  22,  23, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  22,  23,  65,  22,  23,  65,  22,  23,  65,  24,  25, 193,  24,  31,  27,  27,  27,  27,  27,  27,  27, 17 ],
			[  8, 129, 129, 129, 129, 129, 129,  65,  24,  25, 193,  24,  25, 129, 129, 129, 129, 129, 129, 129, 128, 128, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,   0,   0,   1,   1,   1,   1,   1,   1,   1,  24,  25, 193,  24,  25,  65,   1,   1,   1,   1,   1,   1,  9 ],
			[  8,  65,  20,  26,  26,  26,  21,  65,  24,  25, 193,  24,  25, 193,  20,  26,  26,  26,  26,  26,  26,  21, 192,   9,   0,   0,   0,   0,   0,   0,   8, 192,  20,  26,  26,  26,  26,  26,  26,  21, 193,  24,  25, 193,  24,  25,  65,  20,  26,  26,  26,  21,  65,  9 ],
			[  8,  65,  22,  27,  27,  27,  23,  65,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23, 192,  35,  10,  10,  10,  10,  10,  10,  36, 192,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23,  65,  22,  27,  27,  27,  23,  65,  9 ],
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129,  65,  24,  25, 129, 129, 129, 129, 129, 129, 129, 128, 128, 192,   0,   0,   0,   0, 128, 128, 128, 128, 192,   0,   0,   1,   1,   1,   1,   1,   1,   1,  24,  25,  65,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ],
			[ 19,  26,  26,  26,  26,  26,  26,  26,  26,  21,  65,  24,  25, 193,  20,  21, 193,  20,  21, 193,  20,  26,  26,  26,  21, 192,  20,  21, 192,  20,  26,  26,  26,  21, 193,  20,  21, 193,  20,  21, 193,  24,  25,  65,  20,  26,  26,  26,  26,  26,  26,  26,  26, 13 ],
			[ 15,  27,  27,  27,  27,  27,  27,  27,  27,  23,  65,  22,  23, 193,  22,  23, 193,  24,  25, 193,  24,  31,  27,  27,  23, 192,  24,  25, 192,  22,  27,  27,  30,  25, 193,  24,  25, 193,  22,  23, 193,  22,  23,  65,  22,  27,  27,  27,  27,  27,  27,  27,  27, 17 ],
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 129, 193,  24,  25, 193,  24,  25, 128, 128, 128, 192,  24,  25, 192,   0,   0,   0,  24,  25, 193,  24,  25, 193,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ],
			[  8, 193,  20,  26,  26,  26,  21, 193,  20,  21, 193,  20,  21, 193,  20,  26,  26,  28,  25, 193,  24,  25, 192,  20,  26,  26,  28,  29,  26,  26,  21, 192,  24,  25, 193,  24,  29,  26,  26,  21, 193,  20,  21, 193,  20,  21, 193,  20,  26,  26,  26,  21, 193,  9 ],
			[  8, 193,  24,  31,  27,  27,  23, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  30,  25, 193,  24,  25, 192,  22,  27,  27,  27,  27,  27,  27,  23, 192,  24,  25, 193,  24,  31,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  22,  27,  27,  30,  25, 193,  9 ],
			[  8, 193,  24,  25, 129, 129, 129, 195, 129, 129, 193,  24,  25, 193,   1,   1,   1,  24,  25, 193,  24,  25, 193,   1,   1,   1,   0, 128, 129, 129, 129, 193,  24,  25, 193,  24,  25, 129, 129, 129, 193,  24,  25, 193,   1,   1, 195,   1,   1,   1,  24,  25, 193,  9 ],
			[  8, 193,  24,  25, 193,  20,  21, 193,  20,  21, 193,  24,  25, 193,  20,  21, 193,  24,  25, 193,  24,  29,  26,  26,  21, 193,  20,  21, 193,  20,  26,  26,  28,  25, 193,  24,  25, 193,  20,  21, 193,  24,  25, 193,  20,  21, 193,  20,  21, 193,  24,  25, 193,  9 ],
			[  8, 193,  24,  25, 193,  22,  23, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  22,  23, 193,  22,  27,  27,  27,  23, 193,  24,  25, 193,  22,  27,  27,  27,  23, 193,  22,  23, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,  22,  23, 193,  24,  25, 193,  9 ],
			[  8, 193,  24,  25, 193, 129, 129, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193, 128, 128, 193,   1,   1,   1,   1,   1, 193,  24,  25, 193, 129, 129, 129, 129, 129, 193,   0,   0, 193,  24,  25, 193,  24,  25, 193,  24,  25, 193,   1,   1, 193,  24,  25, 193,  9 ],
			[  8, 193,  24,  29,  26,  26,  26,  26,  28,  25, 193,  24,  25, 193,  24,  25, 193,  20,  21, 193,  20,  26,  26,  26,  26,  26,  28,  29,  26,  26,  26,  26,  26,  21, 193,  20,  21, 193,  24,  25, 193,  24,  25, 193,  24,  29,  26,  26,  26,  26,  28,  25, 193,  9 ],
			[  8, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  27,  27,  27,  27,  27,  27,  27,  27,  27,  23, 193,  24,  25, 193,  22,  23, 193,  24,  25, 193,  22,  27,  27,  27,  27,  27,  27,  23, 193,  9 ],
			[  8, 129, 129, 129, 129, 129, 129, 129, 129, 129, 193,  24,  25, 193,   1,   1, 193,  24,  25, 193,   1,   1,   1,   1,   1,   1,   1, 129, 129, 129, 129, 129, 129, 129, 193,  24,  25, 193,   1,   1, 193,  24,  25, 193,   1,   1,   1,   1,   1,   1,   1,   1,   1,  9 ],
			[  6,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  18,  14,  11,  11,  11,  11,  11,  11,  11,  11,  11,  11,  7 ]
		]
	];

	this.reset = function()
	{
		this.level = 0;
		this.callback	= null;
		this.cb_dX		= 0;
		this.cb_dY		= 0;
	};

	this.getLevelNumber = function()
	{
		return this.level;
	};

	this.getNextLevel = function()
	{
		this.level++;
		return this.getLevelConfig();
	};

	this.getLevelBackground = function()
	{
		return this.bgColor[(this.level % 7)];
	};

	this.getLevelBorderColor = function()
	{
		return this.bColor[(this.level % 7)];
	};

	this.getLevelDotColor = function()
	{
		return this.dColor[(this.level % 7)];
	};

	this.getPowerPills = function()
	{
		return this.powerPills[(this.level % 7)];
	};

	this.getLevelConfig = function()
	{
		var result =
		[
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
			[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
		];
		for (var x = 0; x < 30; x++)
		{
			result[x] = this.config[(this.level % 7)][x].slice(0);
		}

		return result;
	};

	this.getDotCount = function()
	{
		return this.dotCount[(this.level % 7)];
	};

	this.reset();
};

Maze = function()
{
	this.maze = 
	[
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
		[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
	];

	this.bColor     = 0;
	this.bgColor    = 'blue';
	this.config     = null;
	this.dColor     = 0;
	this.dotCount   = 0;
	this.dotEaten   = 0;
	this.flashOnOff = true;
	this.flashPills = FLASH_DELAY;
	this.left       = MAZE_HOME;
	this.powerPills = null;

	this.init = function()
	{
		this.bColor     = LL.getLevelBorderColor();
		this.bgColor    = LL.getLevelBackground();
		this.config     = LL.getLevelConfig();
		this.dColor     = LL.getLevelDotColor();
		this.dotCount   = LL.getDotCount();
		this.powerPills = LL.getPowerPills();

		for (var c = 0; c < this.maze[0].length; c+=3)
		{
			this.slice = document.createElement('div');
			this.slice.style.position = 'absolute';
			this.slice.style.left = (c * PIECE_SIZE) + 'px';
			this.slice.style.top  = '0px';
			this.slice.style.align = 'baseline';
			this.slice.style.border = '0';
			this.slice.setAttribute('hspace','0');
			this.slice.setAttribute('vspace','0');
			this.slice.style.width  = (3 * PIECE_SIZE) + 'px';
			this.slice.style.height = (30 * PIECE_SIZE) + 'px';
			mazeArea.appendChild(this.slice);

			for (var r = 0; r < this.maze.length; r++)
			{
				var m = new MazePiece(r,c,this.config[r][c],this.slice,this.bColor,this.dColor);
				this.maze[r][c] = m;
				var n = new MazePiece(r,(c+1),this.config[r][(c+1)],this.slice,this.bColor,this.dColor);
				this.maze[r][(c+1)] = n;
				var o = new MazePiece(r,(c+2),this.config[r][(c+2)],this.slice,this.bColor,this.dColor);
				this.maze[r][(c+2)] = o;
			}
		}
		mazeArea.style.backgroundColor = this.bgColor;
		mazeArea.style.left = this.left + 'px';
	};

	this.reset = function()
	{
		this.bColor     = 0;
		this.bgColor    = 'blue';
		this.config     = null;
		this.dColor     = 0;
		this.dotCount   = 0;
		this.dotEaten   = 0;
		this.flashOnOff = true;
		this.flashPills = FLASH_DELAY;
		this.left       = MAZE_HOME;
		this.powerPills = null;
		this.displayNextLevel(false);
	};
		
	this.displayNextLevel = function(advance)
	{
		window.clearTimeout(this.timerPills);
		if (advance)
		{
			this.config = LL.getNextLevel();
		}
		else
		{
			this.config = LL.getLevelConfig();
		}
		this.bColor     = LL.getLevelBorderColor();
		this.bgColor    = LL.getLevelBackground();
		this.dColor     = LL.getLevelDotColor();
		this.dotCount   = LL.getDotCount();
		this.dotEaten   = 0;
		this.powerPills = LL.getPowerPills();

		mazeArea.style.backgroundColor = this.bgColor;

		for (var r = 0; r < this.config.length; r++)
		{
			for(var c = 0; c < this.config[r].length; c++)
			{
				this.maze[r][c].setPiece(this.config[r][c],this.bColor,this.dColor);
			}
		}
	};

	this.flashPowerPills = function()
	{
		this.flashPills--;
		if (this.flashPills == 0)
		{
			this.flashPills = FLASH_DELAY;
			this.flashOnOff = !this.flashOnOff;
		}
		else
		{
			return;
		}

		for (var i=0; i < this.powerPills.length; i++)
		{
			var x = this.powerPills[i][0];
			var y = this.powerPills[i][1];
			if ((this.config[y][x] & 63) == 3)
			{
				this.maze[y][x].flash(this.flashOnOff);
			}
		}
	};

	this.flashMaze = function(count)
	{
		var self = this;
		if ((count % 2) == 0)
		{
			mazeArea.style.backgroundColor = 'black';
		}
		else
		{
			mazeArea.style.backgroundColor = this.bgColor;
		}
		if (count <= 16)
		{
			count++;
			window.setTimeout(function(){self.flashMaze(count);}, 200);
		}
		else
		{
			GAME.setStatus(gsFlashCompleted);
		}
	};

	this.move = function(x,y)
	{
		var mx = -x + 260;
		if (mx > 0)
		{
			mx = 0;
		}
		else if (mx < -520)
		{
			mx = -520;
		}
		this.left = mx;
		mazeArea.style.left = this.left + 'px';
	};

	this.moveMouse = function(x,y)
	{
		var mx = (-540 + x);
		if (mx > 0)
		{
			mx = 0;
		}
		else if (mx < -520)
		{
			mx = -520;
		}
		this.left = mx;
		mazeArea.style.left = this.left + 'px';
	};

	this.scrollHome = function()
	{
		if (this.left == MAZE_HOME)
		{
			GAME.setStatus(gsScrollCompleted);
			return;
		}
		else if (this.left > MAZE_HOME)
		{
			this.left = ((this.left % 2) == 0) ? (this.left - 2) : (this.left - 1);
		}
		else
		{
			this.left = ((this.left % 2) == 0) ? (this.left + 2) : (this.left + 1);
		}

		mazeArea.style.left = this.left + 'px';
	};

	this.getItem = function(x,y)
	{
		return this.config[y][x];
	};

	this.isHallway = function(col,row)
	{
		if ((this.config[row][col] & 63) <= 3)
		{
			return true;
		}
		else
		{
			return false;
		}
	};

	this.validateTurn = function(sprite)
	{
		var result = false;

		if ((sprite.currentDir == sprite.requestDir) || (Math.abs(sprite.currentDir - sprite.requestDir) == 2))
		{
			result = true;
		}
		else
		{
			if (this.atIntersection(sprite))
			{
				switch(sprite.requestDir)
				{
					case 0:
					{
						if (this.isHallway((sprite.col-1),sprite.row)) {result = true;}
						break;
					}
					case 1:
					{
						if (this.isHallway(sprite.col,(sprite.row+1))) {result = true;}
						break;
					}
					case 2:
					{
						if (this.isHallway((sprite.col+1),sprite.row)) {result = true;}
						break;
					}
					case 3:
					{
						if (this.isHallway(sprite.col,(sprite.row-1))) {result = true;}
						break;
					}
				}
			}
		}
		return result;
	};

	this.validateMove = function(sprite)
	{
		var result = false;
		switch (sprite.currentDir)
		{
			case 0:
			{
				if (this.isHallway((sprite.col-1),sprite.row))
				{
					result = true;
				}
				else if ((sprite.posX % PIECE_SIZE) != 10)
				{
					result = true;
				}
				break;
			}

			case 1:
			{
				if (this.isHallway(sprite.col,(sprite.row+1)))
				{
					result = true;
				}
				else if ((sprite.posY % PIECE_SIZE) != 10)
				{
					result = true;
				}
				break;
			}

			case 2:
			{
				if (this.isHallway((sprite.col+1),sprite.row))
				{
					result = true;
				}
				else if ((sprite.posX % PIECE_SIZE) != 10)
				{
					result = true;
				}
				break;
			}

			case 3:
			{
				if (this.isHallway(sprite.col,(sprite.row-1)))
				{
					result = true;
				}
				else if ((sprite.posY % PIECE_SIZE) != 10)
				{
					result = true;
				}
				break;
			}
		}
		return result;
	};

	this.atIntersection = function(sprite)
	{
		var result = false;
		if (((sprite.posX % 20) == 10) && ((sprite.posY % 20) == 10))
		{
			result = true;
		}
		return result;
	};

	this.findDirections = function(sprite)
	{
		var result = 0;
		var col = sprite.col;
		var row = sprite.row;
		result = (this.isHallway(col,(row-1))) ? (result | 8) : result; //up
		result = (this.isHallway((col+1),row)) ? (result | 4) : result; //right
		result = (this.isHallway(col,(row+1))) ? (result | 2) : result; //down
		result = (this.isHallway((col-1),row)) ? (result | 1) : result; //left
		return result;		
	};

	this.setSuperDot = function(sprite)
	{
		var x1 = sprite.col;
		var y1 = sprite.row;
		var z1 = this.config[y1][x1] & 63;
		if (z1 > 0 && z1 <4)
		{
			var dot = this.config[y1][x1];
			dot = ((dot & 192) | 2);
			this.config[y1][x1] = dot;
			this.maze[y1][x1].setPiece(this.config[y1][x1],this.bColor,this.dColor);
		}
	};

	this.resetDots = function()
	{
		for (var r = 0; r < this.config.length; r++)
		{
			for(var c = 0; c < this.config[r].length; c++)
			{
				var dot = this.config[r][c];
				if ((dot & 63) == 2)
				{
					dot = (dot & 192) | 1;
					this.config[r][c] = dot;
					this.maze[r][c].setPiece(this.config[r][c],this.bColor,this.dColor);
				}
			}
		}
	};

	this.eatDot = function(x,y)
	{
		var d = (this.config[y][x] & 192);
		this.config[y][x] = d;
		this.maze[y][x].eatDot();
		this.dotEaten++;
	};

	this.isLevelComplete = function()
	{
		return (this.dotEaten == this.dotCount);
	};

	this.init();
};

MazePiece = function(row, col, number, parent1, bColor, dColor)
{
	this.row     = row;
	this.col     = col;
	this.number  = number;
	this.height  = PIECE_SIZE;
	this.width   = PIECE_SIZE;
	this.top     = (this.row * PIECE_SIZE);
	this.left    = ((col % 3) * PIECE_SIZE);
	this.index   = (this.number & 63);
	this.object  = null;
	this.parent1 = parent1;
	this.bColor  = bColor;
	this.dColor  = dColor;

	this.init = function()
	{
		this.object = document.createElement('img');
		this.object.id = this.row + '_' + this.col;
		this.object.style.position = 'absolute';
		this.object.style.left = this.left + 'px';
		this.object.style.top  = this.top  + 'px';
		this.object.style.align = 'baseline';
		this.object.style.border = '0';
		this.object.setAttribute('hspace','0');
		this.object.setAttribute('vspace','0');
		this.object.style.width  = this.width  + 'px';
		this.object.style.height = this.height + 'px';
		this.object.alt="maze piece";
		this.setPiece(this.number,this.bColor,this.dColor);
		this.parent1.appendChild(this.object);
	};

	this.setPosition = function(x,y)
	{
		this.left = x;
		this.top  = y;
		this.object.style.top  = this.top  + 'px';
		this.object.style.left = this.left + 'px';
	};

	this.eatDot = function()
	{
		if (this.index == 1 || this.index == 2  || this.index == 3)
		{
			this.index = 0;
			this.object.src='images/' + MazeDotImages[this.dColor][this.index];
		}
	};

	this.setPiece = function(number,bColor,dColor)
	{
		this.number = number;
		this.bColor = bColor;
		this.dColor = dColor;
		this.index  = (this.number & 63);
		if (this.index >= 1 && this.index <= 3)
		{
			this.object.src='images/' + MazeDotImages[this.dColor][this.index];
		}
		else
		{
			this.object.src='images/' + MazePieceImages[this.bColor][this.index];
		}
	};

	this.flash = function(off)
	{
		if (off)
		{
			this.object.src='images/' + MazePieceImages[this.bColor][0];
		}
		else
		{
			this.object.src='images/' + MazeDotImages[this.dColor][this.index];
		}
	};

	this.init();
};

PacManJr = function()
{
	this.row        = 21;
	this.col        = 26;
	this.height     = 40;
	this.width      = 40;
	this.top        = (this.row * PIECE_SIZE) + 10;
	this.left       = (this.col * PIECE_SIZE);
	this.index      = 5;
	this.object     = null;
	this.currentDir = 0;
	this.requestDir = -1;
	this.status     = psAlive;
	this.posX       = this.left;
	this.posY       = this.top;
	this.moveDelay  = 0;

	this.init = function()
	{
		this.object = document.createElement('img');
		this.object.id = 'PacManJr';
		this.object.style.position = 'absolute';
		this.object.style.left = this.left + 'px';
		this.object.style.top  = this.top  + 'px';
		this.object.style.align = 'baseline';
		this.object.style.border = '0';
		this.object.setAttribute('hspace','0');
		this.object.setAttribute('vspace','0');
		this.object.style.width  = this.width  + 'px';
		this.object.style.height = this.height + 'px';
		this.object.src='images/' + PacManJrImages[this.currentDir][this.index];
		this.object.style.zIndex = 10;
		this.object.alt="pacman jr";
		mazeArea.appendChild(this.object);
	};

	this.animate = function()
	{
		//this.index++;
		//this.index = this.index % 10;
		//this.object.src='images/' + PacManJrImages[this.dir][this.index];
		this.move();
	};

	this.reset = function()
	{
		this.row        = 21;
		this.col        = 26;
		this.height     = 40;
		this.width      = 40;
		this.top        = (this.row * PIECE_SIZE) + 10;
		this.left       = (this.col * PIECE_SIZE);
		this.index      = 5;
		this.currentDir = 0;
		this.requestDir = -1;
		this.status     = psAlive;
		this.posX       = this.left;
		this.posY       = this.top;
		this.moveDelay  = 0;
		this.object.style.visibility = 'visible';
	};

	this.move = function()
	{
		var x = 0;

		switch (this.status)
		{
			case psAlive:
			{
				if (this.moveDelay > 0)
				{
					this.moveDelay--;
					return;
				}
				if (this.requestDir != -1)
				{
					if (MAZE.validateTurn(this))
					{
						this.turn();
					}
				}
				if (MAZE.validateMove(this))
				{
					this.posX += SpriteMovement1[this.currentDir][0];
					this.posY += SpriteMovement1[this.currentDir][1];
				}
				if ((this.currentDir & 1) == 0)
				{
					this.index = (((this.left >> 1) + 0) % 10);
				}
				else
				{
					this.index = (((this.top >> 1) + 0) % 10);
				}
				x = (MAZE.getItem(this.col, this.row) & 63);
				if ((x <= 3) && (x > 0))
				{
					MAZE.eatDot(this.col, this.row);
					if (x == 1)
					{
						// small dot
						this.moveDelay = 4;
						FX.play(SFX_EATPILL1);
						SB.updateScore(1,10);
					}
					else if (x == 2)
					{
						// super dot
						this.moveDelay = 8;
						FX.play(SFX_EATPILL2);
						SB.updateScore(1,50);
					}
					else if (x == 3)
					{
						// power pill
						this.moveDelay = 8;
						GS.setScared();
						FX.play(SFX_EATPILL3);
						SB.updateScore(1,100);
					}
				}
				break;
			}

			case psCaught:
			{
				if (this.moveDelay > 0)
				{
					this.moveDelay--;
					return;
				}
				this.setStatus(psDying);
				FX.start(SFX_NOSOUND);
				FX.start(SFX_KILLED);
				break;
			}

			case psDying:
			{
				if (this.moveDelay > 0)
				{
					this.moveDelay--;
					return;
				}
				this.index++;
				if (this.index > 10)
				{
					this.index = 5;
					this.currentDir = 4;
					this.requestDir = -1;
					this.setStatus(psInvisible);
					this.moveDelay = 0;
					ST.updateLives(-1);
					GAME.setStatus(gsScrollHome);
					return;
				}
				this.moveDelay = 35;
				break;
			}

			case psInvisible:
			{
				FX.start(SFX_NOSOUND);
				this.object.style.visibility = 'hidden';
				return;
				break;
			}

			case psReset:
			{
				this.object.style.visibility = 'visible';
				break;
			}
		}
		this.setPosition(this.posX, this.posY);
	};

	this.setStatus = function(status)
	{
		switch (status)
		{
			case psAlive:
			{
				this.status = status;
				break;
			}

			case psCaught:
			{
				if (this.status != psAlive)
				{
					return;
				}
				this.status = status;
				this.moveDelay = 105;
				break;
			}

			case psDying:
			{
				if (this.status != psCaught)
				{
					return;
				}
				this.status = status;
				GS.setInvisible();
				this.index = 0;
				this.moveDelay = 35;
				this.currentDir = 4;
				this.requestDir = -1;
				break;
			}

			case psInvisible:
			{
				this.moveDelay = 250;
				this.status = status;
				this.object.style.visibility = 'hidden';
				break;
			}

			case psReset:
			{
				this.status = status;
				break;
			}
		}
	};

	this.turn = function()
	{
		this.currentDir = this.requestDir;
		this.requestDir = -1;
	};

	this.setPosition = function(x,y)
	{
		this.top  = y;
		this.left = x;
		this.row = Math.floor(y / PIECE_SIZE) + 1;
		this.col = Math.floor(x / PIECE_SIZE) + 1;
		this.posX = x;
		this.posY = y;
		this.object.style.left  = this.left + 'px';
		this.object.style.top   = this.top  + 'px';
		this.object.src='images/' + PacManJrImages[this.currentDir][this.index];
		if ((this.posX & 3) == 0)
		{
			MAZE.move(this.posX,this.posY);
		}
		if ((GD.status == gsOn) && (GAME.checkCollision(this, GD)))
		{
			GD.turnOff(true);
		}
	};

	this.init();
};

PlayFX = function()
{
	var self = this;

	this.angry     = false;
	this.eaten     = false;
	this.eatGhost  = false;
	this.eatGoodie = false;
	this.goodie    = false;
	this.killed    = false;
	this.newGame   = false;
	this.newLevel  = false;
	this.scared    = false;
	this.soundFX   = [];
	this.pausedFX  = [];

	this.init = function()
	{
		this.soundFX[SFX_ANGRY]		= new Howl({ src: ['audio/angry.mp3'], loop:false, volume: 0.3, onend: function(){self.stop(SFX_ANGRY)} });
		this.soundFX[SFX_BGGHOST]	= new Howl({ src: ['audio/bgghost.mp3'], loop:false, volume: 0.3, onend: function(){self.stop(SFX_BGGHOST)} });
		this.soundFX[SFX_BGGHOSTEYES]	= new Howl({ src: ['audio/bgghosteyes.mp3'], loop:false, onend: function(){self.stop(SFX_BGGHOSTEYES)} });
		this.soundFX[SFX_EATGHOST]	= new Howl({ src: ['audio/eatghost.mp3'], loop:false, volume: 1.0, onend: function(){self.stop(SFX_EATGHOST)} });
		this.soundFX[SFX_EATGOODIES]	= new Howl({ src: ['audio/eatgoodies.mp3'], onend: function(){self.stop(SFX_EATGOODIES)} });
		this.soundFX[SFX_EATPILL1]	= new Howl({ src: ['audio/eatpill1.mp3'], volume: 0.5 });
		this.soundFX[SFX_EATPILL2]	= new Howl({ src: ['audio/eatpill2.mp3'] });
		this.soundFX[SFX_EATPILL3]	= new Howl({ src: ['audio/eatpill3.mp3'] });
		this.soundFX[SFX_EXTRALIFE]	= new Howl({ src: ['audio/extralife.mp3'] });
		this.soundFX[SFX_GOODIES]	= new Howl({ src: ['audio/goodies.mp3'], onend: function(){self.stop(SFX_GOODIES)} });
		this.soundFX[SFX_KILLED]	= new Howl({ src: ['audio/killed.mp3'], onend: function(){self.stop(SFX_KILLED)} });
		this.soundFX[SFX_NEWGAME]	= new Howl({ src: ['audio/newgame.mp3'], onend: function(){self.stop(SFX_NEWGAME)} });
		this.soundFX[SFX_NEWLEVEL]	= new Howl({ src: ['audio/newlevel.mp3'], onend: function(){self.stop(SFX_NEWLEVEL)} });

		for (let i = 0; i < this.soundFX.length; i++)
		{
			this.pausedFX[i] = false;
		}
	};

	this.play = function(what)
	{
		this.soundFX[what].play();
	};

	this.pauseAll = function()
	{
		for (let i = 0; i < this.soundFX.length; i++)
		{
			if (this.soundFX[i].playing())
			{
				this.soundFX[i].pause();
				this.pausedFX[i] = true;
			}
		}
	};
	
	this.resumeAll = function()
	{
		for (let i = 0; i < this.soundFX.length; i++)
		{
			if (this.pausedFX[i])
			{
				this.play(i);
				this.pausedFX[i] = false;
			}
		}
	};

	this.stopAll = function()
	{
		for (let i = 0; i < this.soundFX.length; i++)
		{
			if (this.soundFX[i].playing())
			{
				this.soundFX[i].stop();
				this.pausedFX[i] = false;
			}
		}
	};

	this.start = function(what)
	{
		switch (what)
		{
			case SFX_NOSOUND:
			{
				this.pauseAll();
				break;
			}
			case SFX_ANGRY:
			{
				if (! this.angry)
				{
					this.angry = true;
					this.play(SFX_ANGRY);
				}
				break;
			}
			case SFX_EATGHOST:
			{
				if (! this.eatGhost)
				{
					this.eatGhost = true;
					this.play(SFX_EATGHOST);
				}
				break;
			}
			case SFX_EATGOODIES:
			{
				if (! this.eatGoodie)
				{
					this.eatGoodie = true;
					//this.eatGhost = true;
					this.play(SFX_EATGOODIES);
				}
				break;
			}
			case SFX_BGGHOST:
			{
				if (! this.scared)
				{
					this.scared = true;
					this.play(SFX_BGGHOST);
				}
				break;
			}
			case SFX_BGGHOSTEYES:
			{
				if (! this.eaten)
				{
					this.eaten = true;
					this.play(SFX_BGGHOSTEYES);
				}
				break;
			}
			case SFX_GOODIES:
			{
				if (! this.goodie)
				{
					this.goodie = true;
					this.play(SFX_GOODIES);
				}
				break;
			}
			case SFX_KILLED:
			{
				if (! this.killed)
				{
					this.killed = true;
					this.play(SFX_KILLED);
				}
				break;
			}
			case SFX_NEWLEVEL:
			{
				if (! this.newLevel)
				{
					this.newLevel = true;
					this.play(SFX_NEWLEVEL);
				}
				break;
			}
			case SFX_NEWGAME:
			{
				if (! this.newGame)
				{
					this.newGame = true;
					this.play(SFX_NEWGAME);
				}
				break;
			}
		}
	};

	this.stop = function(n)
	{
		switch (n)
		{
			case SFX_ANGRY:       {this.angry     = false; break;}
			case SFX_EATGHOST:    {this.eatGhost  = false; break;}
			case SFX_EATGOODIES:  {this.eatGoodie = false; break;}
			case SFX_BGGHOST:     {this.scared    = false; break;}
			case SFX_BGGHOSTEYES: {this.eaten     = false; break;}
			case SFX_GOODIES:     {this.goodie    = false; break;}
			case SFX_KILLED:      {this.killed    = false; break;}
			case SFX_NEWLEVEL:    {this.newLevel  = false; break;}
			case SFX_NEWGAME:     {this.newGame   = false; break;}
		}
	};

	this.init();
};

Phrases = function()
{
	this.phrases  = [0,0];
	this.callback = null;
	this.index    = 0;
	this.hidden   = true;

	this.init = function()
	{
		for (var i = 0; i < this.phrases.length; i++)
		{
			var object = document.createElement('img');
			object.id = 'Phrase' + i;
			object.style.position = 'absolute';
			object.style.left = '-500px';
			object.style.top  = '345px';
			object.style.align = 'baseline';
			object.style.border = '0';
			object.setAttribute('hspace','0');
			object.setAttribute('vspace','0');
			object.style.width  = '160px';
			object.style.height = '20px';
			object.src='images/' + PhraseImages[i];
			object.style.zIndex = 50;
			object.alt="game phrase";
			stage.appendChild(object);
			this.phrases[i] = object;
		}
	};

	this.reset = function()
	{
		this.callback = null;
		this.index    = 0;
		this.hidden   = true;
		this.phrases[0].style.left = '-500px';
		this.phrases[1].style.left = '-500px';
	};

	this.show = function(which, time, callback)
	{
		if (callback && typeof callback == 'function')
		{
			this.callback = callback;
		}
		else
		{
			this.callback = null;
		}

		this.index = which;
		var self = this;
		this.phrases[this.index].style.left = '200px';
		this.hidden = false;
		if (time > 0)
		{
			window.setTimeout(function() {self.hide();}, time);
		}
	};

	this.hide = function()
	{
		if (this.hidden) {return;}
		this.phrases[this.index].style.left = '-500px';
		this.hidden = true;
		if (this.callback != null)
		{
			this.callback();
		}
	};

	this.init();
};

AllGhosts = function(pacmanjr)
{
	this.pacmanjr = pacmanjr;
	this.ghosts   = [null,null,null,null];
	this.startDir = [3,3,1,0];
	this.startPos = [
				[(28*PIECE_SIZE), ((12*PIECE_SIZE)+10)],
				[(24*PIECE_SIZE), ((12*PIECE_SIZE)+10)],
				[(26*PIECE_SIZE), ((12*PIECE_SIZE)+10)],
				[(26*PIECE_SIZE), (( 9*PIECE_SIZE)+10)]
			];

	this.init = function()
	{
		for (var n = 0; n < this.ghosts.length; n++)
		{
			var x = this.startPos[n][0];
			var y = this.startPos[n][1];
			var d = this.startDir[n];
			var g = new Ghost(n, x, y, d);
			g.setStatus(gsAlive_AtHome)
			this.ghosts[n] = g;
		}
		this.ghosts[3].setStatus(gsAlive_Random);
	};

	this.reset = function()
	{
		for (var n = 0; n < this.ghosts.length; n++)
		{
			var x = this.startPos[n][0];
			var y = this.startPos[n][1];
			var d = this.startDir[n];
			this.ghosts[n].reset(x,y,d);
		}
		this.ghosts[3].setStatus(gsAlive_Random);
	};

	this.animate = function()
	{
		var snd_scared = false;
		var snd_eaten  = false;

		this.setRadar();
		for (var n = 0; n < this.ghosts.length; n++)
		{
			this.ghosts[n].animate();
		}
		this.checkCollision();
		
		for (var n = 0; n < this.ghosts.length; n++)
		{
			if (this.ghosts[n].status == gsAlive_Scared)     { snd_scared = true;}
			if (this.ghosts[n].status == gsEaten_SeekingHome){ snd_eaten  = true;}
		}
		if (snd_scared)
		{
			FX.start(SFX_BGGHOST);
		}
		else
		{
			FX.start(SFX_ANGRY);
		}
		if (snd_eaten)
		{
			FX.start(SFX_BGGHOSTEYES);
		}
	};

	this.checkCollision = function()
	{
		for (var n = 0; n < this.ghosts.length; n++)
		{
			if (GAME.checkCollision(this.ghosts[n], this.pacmanjr))
			{
				if (this.ghosts[n].status == gsAlive_Random)
				{
					this.ghosts[n].setStatus(gsAlive_Eating);
					this.pacmanjr.setStatus(psCaught);
				}
				else if (this.ghosts[n].status == gsAlive_Scared)
				{
					FX.start(SFX_EATGHOST);
					this.ghosts[n].setStatus(gsEaten_SeekingHome);
					this.pacmanjr.moveDelay += 20;
					SU.showScoreUp(false);
				}
			}
		}
	};

	this.setInvisible = function()
	{
		for (var n = 0; n < this.ghosts.length; n++)
		{
			this.ghosts[n].setStatus(gsInvisible);
		}
	};

	this.setScared = function()
	{
		FX.play(SFX_BGGHOST);
		SU.reset();
		var flashTimer = 700 - (LL.getLevelNumber()*100);
		flashTimer = Math.max(100,flashTimer);
		for (var n = 0; n < this.ghosts.length; n++)
		{
			this.ghosts[n].setScared(flashTimer);
		}
	};

	this.setRadar = function()
	{
		for (var n = 0; n < this.ghosts.length; n++)
		{
			this.ghosts[n].setRadar(this.pacmanjr);
		}
	};

	this.setEaten = function()
	{
		for (var n = 0; n < this.ghosts.length; n++)
		{
			this.ghosts[n].setStatus(gsEaten_SeekingHome);
		}
	};

	this.init();
};

Ghost = function(number, x, y, dir)
{
	this.changeDelay  = 10;
	this.col          = Math.floor(x / PIECE_SIZE) + 1;
	this.currentDir   = dir;
	this.height       = 40;
	this.homeCounter  = 0;
	this.homeNumber   = ((3 - number) * 8);
	this.homeX        = x;
	this.index        = 0;
	this.left         = x;
	this.moveDelay    = 0;
	this.number       = number;
	this.object       = null;
	this.object1      = null;
	this.posX         = x;
	this.posY         = y;
	this.radarDir     = 0;
	this.radarX       = 0;
	this.radarY       = 0;
	this.requestDir   = -1;
	this.row          = Math.floor(y / PIECE_SIZE) + 1;
	this.scaredDelay  = 0;
	this.scaredFlash  = 8;
	this.scaredIndex  = 4;
	this.status       = gsAlive_AtHome;
	this.top          = y;
	this.width        = 40;

	this.init = function()
	{
		this.object = document.createElement('img');
		this.object.id = 'Ghost' + this.number;
		this.object.style.position = 'absolute';
		this.object.style.left = this.left + 'px';
		this.object.style.top  = this.top  + 'px';
		this.object.style.align = 'baseline';
		this.object.style.border = '0';
		this.object.setAttribute('hspace','0');
		this.object.setAttribute('vspace','0');
		this.object.style.width  = this.width  + 'px';
		this.object.style.height = this.height + 'px';
		this.object.src='images/' + GhostImages[this.number][this.index];
		this.object.style.zIndex = 10;
		this.object.alt="ghost";
		mazeArea.appendChild(this.object);

		this.object1 = document.createElement('img');
		this.object1.id = 'GhostEye' + this.number;
		this.object1.style.position = 'absolute';
		this.object1.style.left = this.left + 'px';
		this.object1.style.top  = this.top  + 'px';
		this.object1.style.align = 'baseline';
		this.object1.style.border = '0';
		this.object1.setAttribute('hspace','0');
		this.object1.setAttribute('vspace','0');
		this.object1.style.width  = this.width  + 'px';
		this.object1.style.height = this.height + 'px';
		this.object1.src='images/' + GhostEyeImages[this.currentDir];
		this.object1.style.zIndex = 11;
		this.object1.alt="ghost eyes";
		mazeArea.appendChild(this.object1);
	};

	this.reset = function(x,y,dir)
	{
		this.currentDir   = dir;
		this.requestDir   = -1;
		this.changeDelay  = 1;
		this.radarX       = 0;
		this.radarY       = 0;
		this.radarDir     = 0;
		this.scaredDelay  = 0;
		this.scaredIndex  = 4;
		this.scaredFlash  = 8;
		this.homeX        = x;
		this.moveDelay    = 0;
		this.setStatus(gsAlive_AtHome);
		this.setPosition(x,y);
	};

	this.animate = function()
	{
		this.changeDelay--;
		if (this.changeDelay == 0)
		{
			this.changeDelay = 10;
			this.index = 1 - this.index;
			if (this.status == gsAlive_Scared)
			{
				this.object.src='images/' + GhostImages[this.scaredIndex][this.index];
			}
			else
			{
				this.object.src='images/' + GhostImages[this.number][this.index];
			}
		}
		this.move();
	};

	this.randomDirection = function(dir, backTrack)
	{
		var ind = Math.floor(Math.random() * 4);
		var rnd = 0;

		//99.7% of the time, don't allow backtracking
		if ((Math.floor(Math.random()*1000) >= 997) && (backTrack))
		{
			do
			{
				rnd = RandomValues[this.number][ind];
				ind++;
				ind = (ind & 3);
				var yy = ConvertDir[rnd] & dir;
				var zz = !(yy == ConvertDir[rnd]);
			} while (zz);
		}
		else
		{
			do
			{
				rnd = RandomValues[this.number][ind];
				ind++;
				ind = (ind & 3);
				var xx = Math.abs(this.currentDir - rnd);
				var yy = ConvertDir[rnd] & dir;
				var zz = !((xx != 2) && (yy == ConvertDir[rnd]));
			} while (zz);
		}
		return ConvertDir[rnd];
	};

	this.towardsPacManJr = function()
	{
		var towards = 0;
		var dx      = this.radarX - this.col;
		var dy      = this.radarY - this.row;
		var dir     = MAZE.findDirections(this);

		dir = dir & (~ ConvertDirNoBT[this.currentDir]);

		if (Math.abs(dx) >= Math.abs(dy))
		{
			towards = (dx <= 0) ? 1 : 4;
		}
		else
		{
			towards = (dy <= 0) ? 8 : 2;
		}
		if ((towards & dir) != towards)
			towards = 0;
		return towards;
	};

	this.awayFromPacManJr = function()
	{
		var away = 0;
		var ind  = 0;
		var dx   = this.radarX - this.col;
		var dy   = this.radarY - this.row;
		var dir  = MAZE.findDirections(this);

		dir = dir & (~ ConvertDirNoBT[this.currentDir]);
		if (Math.abs(dx) >= Math.abs(dy))
		{
			away = (dx <= 0) ? 2 : 0;
		}
		else
		{
			away = (dy <= 0) ? 1 : 3;
		}
		if ((ConvertDir[away] & dir) != ConvertDir[away])
		{
			do
			{
				away = RandomValues[this.number][ind];
				ind++;
				var xx = Math.abs(this.currentDir - away);
				var yy = ConvertDir[away] & dir;
				var zz = !((xx != 2) && (yy == ConvertDir[away]));
			} while (zz);
		}
		return away;
	};

	this.reverseDirection = function()
	{
		if (this.status == gsAlive_Random)
		{
	        	this.currentDir = ((this.currentDir + 2) & 3);
	        }
	};

	this.checkSight = function(dir)
	{
		var temp = dir;

		switch (dir)
		{
			case 1:
			{
				if ((this.radarY == this.row) && (this.radarX <= this.col))
				{
					for (var loop = this.col; loop > this.radarX; loop--)
					{
						if (! MAZE.isHallway(loop,this.row))
						{
							temp = 0;
							break;
						}
					}
				}
				else
				{
					temp = 0;
				}
				break;
			}

			case 2:
			{
				if ((this.radarX == this.col) && (this.radarY >= this.row))
				{
					for (var loop = this.row; loop < this.radarY; loop++)
					{
						if (! MAZE.isHallway(this.col,loop))
						{
							temp = 0;
							break;
						}
					}
				}
				else
				{
					temp = 0;
				}
				break;
			}

			case 4:
			{
				if ((this.radarY == this.row) && (this.radarX >= this.col))
				{
					for (var loop = this.col; loop < this.radarX; loop++)
					{
						if (! MAZE.isHallway(loop,this.row))
						{
							temp = 0;
							break;
						}
					}
				}
				else
					temp = 0;
				break;
			}

			case 8:
			{
				if ((this.radarX == this.col) && (this.radarY <= this.row))
				{
					for (var loop = this.row; loop > this.radarY; loop--)
					{
						if (! MAZE.isHallway(this.col,loop))
						{
							temp = 0;
							break;
						}
					}
				}
				else
				{
					temp = 0;
				}
				break;
			}
		}
		return temp;
	};

	this.chosenDirection = function()
	{
		var cd      = 0; //this.randomDirection(dir,true);
		var sight   = 0;
		var dir     = MAZE.findDirections(this);
		var dx      = Math.abs(this.radarX - this.col);
		var dy      = Math.abs(this.radarY - this.row);
		var testDir = dir & (~ ConvertDirNoBT[this.currentDir]);

		// Check Sight
		if ((testDir & 1) == 1) {sight = this.checkSight(1);}
		if ((sight == 0) && ((testDir & 2) == 2)) {sight = this.checkSight(2);}
		if ((sight == 0) && ((testDir & 4) == 4)) {sight = this.checkSight(4);}
		if ((sight == 0) && ((testDir & 8) == 8)) {sight = this.checkSight(8);}
		cd = sight;

		var gameLevel = 7-(LL.getLevelNumber() % 7);
		// Override sight, if close enough
		if ((cd == 0) || ((dx <= ((13-this.number)+gameLevel)) && (dy <= ((8-this.number)+gameLevel))))
		{
			// Too far? - Random search
			if ((dx > ((20-this.number)+gameLevel)) && (dy > ((12-this.number)+gameLevel)))
			{
				cd = this.randomDirection(dir,true);
			}
			else if ((dx <= ((13-this.number)+gameLevel)) && (dy <= ((8-this.number)+gameLevel)))
			{
				// Not too far away, go towards
				cd = this.towardsPacManJr();
				if (cd == 0)
				{
					cd = this.randomDirection(dir,false);
				}
			}
			else
			{
				// Close enough, check direction as well as position
				if ((Math.random()*10) < 2)
				{
					cd = this.randomDirection(dir,false);
				}
				else
				{
					// Odd Ghost - follow
					if ((this.number & 1) == 1)
					{
						cd = this.towardsPacManJr();
						if (cd == 0)
						{
							cd = this.randomDirection(dir,false);
						}
					}
					else
					{
						// Even Ghost - try to trap
						if ((ConvertDir[this.radarDir] & testDir) == ConvertDir[this.radarDir])
						{
							cd = ConvertDir[this.radarDir];
						}
						else
						{
							cd = this.towardsPacManJr();
							if (cd == 0)
							{
								cd = this.randomDirection(dir,false);
							}
						}
					}
				}
			}
		}

		switch (cd)
		{
			case 1: {cd = 0; break;}
			case 2: {cd = 1; break;}
			case 4: {cd = 2; break;}
			case 8: {cd = 3; break;}
		}
		return cd;
	};

	this.setRadar = function(sprite)
	{
		this.radarX   = sprite.col;
		this.radarY   = sprite.row;
		this.radarDir = sprite.currentDir;
	};

	this.setScared = function(amount)
	{
		if ((this.status != gsAlive_Random) && (this.status != gsAlive_Scared))
		{
			return;
		}

		this.status = gsAlive_Scared;
		this.scaredDelay = amount;
		this.scaredIndex = 4;
		this.scaredFlash = 8;

		this.object.src='images/' + GhostImages[this.scaredIndex][this.index];

		//Go in opposite direction immediately
		this.currentDir = ((this.currentDir+2) & 3);
	};

	this.setStatus = function(status)
	{
		switch (status)
		{
			case gsAlive_Random:
			{
				break;
			}
			
			case gsAlive_AtHome:
			{
				this.object.src='images/' + GhostImages[this.number][this.index];
				this.object1.src='images/' + GhostEyeImages[this.currentDir];
				this.object.style.visibility  = 'visible';
				this.object1.style.visibility = 'visible';
				break;
			}

			case gsEaten_SeekingHome:
			{
				this.object.style.visibility = 'hidden';
				break;
			}

			case gsEaten_EnterHome:
			{
				break;
			}

			case gsAlive_Eating:
			{
				this.moveDelay = 300;
				break;
			}

			case gsInvisible:
			{
				this.object.style.visibility  = 'hidden';
				this.object1.style.visibility = 'hidden';
			}
		}
		this.status = status;
	};

	this.move = function()
	{
		switch (this.status)
		{
			case gsAlive_Random:
			{
				if (this.moveDelay > 0)
				{
					this.moveDelay--;
					return;
				}
				if ((this.currentDir & 1) == 0)
				{
					if ((this.posX % 10) == 0)
					{
						this.moveDelay = 2;
					}
				}
				else
				{
					if ((this.posY % 10) == 0)
					{
						this.moveDelay = 2;
					}
				}
				if (MAZE.atIntersection(this))
				{
					this.requestDir = this.chosenDirection();
				}
				if (this.requestDir != -1)
				{
					if (MAZE.validateTurn(this))
					{
						var x = Math.abs(this.currentDir - this.requestDir);
						if ((x == 1) || (x == 3)) {this.moveDelay = 2;}
						this.turn();
					}
				}
				if (MAZE.validateMove(this))
				{
					this.posX += SpriteMovement1[this.currentDir][0];
					this.posY += SpriteMovement1[this.currentDir][1];
				}
				break;
			}

			case gsAlive_Scared:
			{
				if (this.moveDelay > 0)
				{
					this.moveDelay--;
					return;
				}
				this.moveDelay = 1;
				if (MAZE.atIntersection(this))
				{
					this.requestDir = this.awayFromPacManJr();
				}
				if (this.requestDir != -1)
				{
					if (MAZE.validateTurn(this))
					{
						this.turn();
					}
				}
				if (MAZE.validateMove(this))
				{
					this.posX += SpriteMovement1[this.currentDir][0];
					this.posY += SpriteMovement1[this.currentDir][1];
				}
				this.scaredDelay--;
				if (this.scaredDelay == 0)
				{
					this.scaredDelay = 40;
					this.scaredIndex = ((5 - this.scaredIndex) + 4);
					this.scaredFlash--;
					if (this.scaredFlash == 0)
					{
						this.setStatus(gsAlive_Random);
					}
				}
                		break;
			}

			case gsAlive_AtHome:
			{
				if (this.moveDelay > 0)
				{
					this.moveDelay--;
					return;
				}
				this.moveDelay = 2;
				this.posX += SpriteMovement1[this.currentDir][0];
				this.posY += SpriteMovement1[this.currentDir][1];

				if (this.posY <= 240)
				{
					this.requestDir = 1;
					this.turn();
				}
				else if (this.posY >= 260)
				{
					this.requestDir = 3;
					this.turn();
					this.homeCounter++;
					if (this.homeCounter >= this.homeNumber)
					{
						this.homeCounter = 0;
						this.setStatus(gsAlive_ExitHome);
					}
				}
				break;
			}

			case gsAlive_ExitHome:
			{
				if (this.moveDelay > 0)
				{
					this.moveDelay--;
					return;
				}
				this.moveDelay = 2;
				if (this.posX == 520)
				{
					if (this.posY >= 191)
					{
						this.requestDir = 3;
						this.turn();
					}
					else if (this.posY == 190)
					{
						this.requestDir = 0;
						this.turn();
						this.setStatus(gsAlive_Random);
					}
				}
				else if (this.posX == 480)
				{
					this.requestDir = 2;
					this.turn();
				}
				else if (this.posX == 560)
				{
					this.requestDir = 0;
					this.turn();
				}
				this.posX += SpriteMovement1[this.currentDir][0];
				this.posY += SpriteMovement1[this.currentDir][1];
				break;
			}

			case gsEaten_SeekingHome:
			{
				this.requestDir = MAZE.getItem(this.col, this.row) >> 6;
				if (this.requestDir != -1)
				{
					if (MAZE.validateTurn(this))
					{
						this.turn();
					}
				}
				if (MAZE.validateMove(this))
				{
					this.posX += SpriteMovement1[this.currentDir][0];
					this.posY += SpriteMovement1[this.currentDir][1];
					this.setPosition(this.posX, this.posY);
				}
				if ((this.col == 27) && (this.row == 10))
				{
					if (this.posX == 520)
					{
						this.requestDir = 1;
						this.turn();
						this.setStatus(gsEaten_EnterHome);
						this.posX += SpriteMovement1[this.currentDir][0];
						this.posY += SpriteMovement1[this.currentDir][1];
						this.setPosition(this.posX, this.posY);
					}
				}
				// Do it twice for speedier return home
				this.requestDir = MAZE.getItem(this.col, this.row) >> 6;
				if (this.requestDir != -1)
				{
					if (MAZE.validateTurn(this))
					{
						this.turn();
					}
				}
				if (MAZE.validateMove(this))
				{
					this.posX += SpriteMovement1[this.currentDir][0];
					this.posY += SpriteMovement1[this.currentDir][1];
					this.setPosition(this.posX, this.posY);
				}
				if ((this.col == 27) && (this.row == 10))
				{
					if (this.posX == 520)
					{
						this.requestDir = 1;
						this.turn();
						this.setStatus(gsEaten_EnterHome);
						this.posX += SpriteMovement1[this.currentDir][0];
						this.posY += SpriteMovement1[this.currentDir][1];
						this.setPosition(this.posX, this.posY);
					}
				}
				break;
			}

			case gsEaten_EnterHome:
			{
				if (this.posY == 260)
				{
					if (this.posX < this.homeX)
					{
						this.requestDir = 2;
						this.turn();
					}
					else if (this.posX > this.homeX)
					{
						this.requestDir = 0;
						this.turn();
					}
					else
					{
						this.requestDir = 1;
						this.turn();
						this.setStatus(gsAlive_AtHome);
					}
				}
				this.posX += SpriteMovement1[this.currentDir][0];
				this.posY += SpriteMovement1[this.currentDir][1];
				break;
			}

			case gsAlive_Eating:
			{
				this.moveDelay--;
				if (this.moveDelay <= 0)
				{
					this.setStatus(gsInvisible);
				}
				break;
			}
		}
		this.setPosition(this.posX, this.posY);
	};

	this.turn = function()
	{
		this.currentDir = this.requestDir;
		this.requestDir = -1;
	};

	this.setPosition = function(x,y)
	{
		this.row = Math.floor(y / PIECE_SIZE) + 1;
		this.col = Math.floor(x / PIECE_SIZE) + 1;
		this.posX = x;
		this.posY = y;
		this.top  = y;
		this.left = x;
		this.object.style.left  = this.left + 'px';
		this.object.style.top   = this.top  + 'px';
		this.object1.style.left = this.left + 'px';
		this.object1.style.top  = this.top  + 'px';
		if (this.status == gsAlive_Scared)
		{
			this.object1.src='images/' + GhostEyeImages[this.scaredIndex];
		}
		else
		{
			this.object1.src='images/' + GhostEyeImages[this.currentDir];
		}
	};

	this.init();
};

Goodies = function()
{
	this.col          = 0;
	this.currentDir   = 0;
	this.height       = 40;
	this.index        = 0;
	this.left         = -100;
	this.moveDelay    = 0;
	this.number       = 0;
	this.object       = null;
	this.posX         = -100;
	this.posY         = -100;
	this.requestDir   = -1;
	this.row          = 0;
	this.status       = gsOff;
	this.top          = -100;
	this.width        = 40;

	this.init = function()
	{
		this.object = document.createElement('img');
		this.object.id = 'Goodie';
		this.object.style.position = 'absolute';
		this.object.style.left = this.left + 'px';
		this.object.style.top  = this.top  + 'px';
		this.object.style.align = 'baseline';
		this.object.style.border = '0';
		this.object.setAttribute('hspace','0');
		this.object.setAttribute('vspace','0');
		this.object.style.width  = this.width  + 'px';
		this.object.style.height = this.height + 'px';
		this.object.src='images/' + GoodieImages[this.index];
		this.object.style.zIndex = 5;
		this.object.alt="goodie";
		mazeArea.appendChild(this.object);
	};

	this.animate = function()
	{
		if (this.status != gsOn)
		{
			return;
		}

		this.move();
	};

	this.showScoreUp = function()
	{
	    SU.showScoreUp(true);
	};

	this.turnOn = function()
	{
		if (this.status != gsOff)
		{
			return;
		}
		this.status = gsOn;
		this.currentDir = 0;
		this.requestDir = -1;
		this.index = (LL.getLevelNumber() % 7);
		this.object.src='images/' + GoodieImages[this.index];
		this.setPosition((26*PIECE_SIZE),((15*PIECE_SIZE)+10));
	};

	this.turnOff = function(eaten)
	{
		if (this.status != gsOn)
		{
			return;
		}
		this.status = gsOff;
		this.currentDir = 0;
		this.requestDir = -1;
		this.setPosition(-100,-100);
		if (eaten)
		{
			FX.start(SFX_EATGOODIES);
			this.showScoreUp();
		}
	};

	this.setPosition = function(x,y)
	{
		this.row  = Math.floor(y / PIECE_SIZE) + 1;
		this.col  = Math.floor(x / PIECE_SIZE) + 1;
		this.posX = x;
		this.posY = y;
		this.top  = y;
		this.left = x;
		this.object.style.left = this.left + 'px';
		this.object.style.top  = this.top  + 'px';
	};

	this.turn = function()
	{
		this.currentDir = this.requestDir;
		this.requestDir = -1;
	};

	this.move = function()
	{
		if (this.moveDelay > 0)
		{
			this.moveDelay--;
			return;
		}
		if (MAZE.atIntersection(this))
		{
			FX.start(SFX_GOODIES);
			this.moveDelay = GOODIE_DELAY2;
			this.requestDir = this.randomDirection();
			MAZE.setSuperDot(this);
		}
		else
		{
			this.moveDelay = GOODIE_DELAY;
		}

		if (this.requestDir != -1)
		{
			if (MAZE.validateTurn(this))
			{
				this.turn();
			}
		}
		if (MAZE.validateMove(this))
		{
			this.posX += SpriteMovement1[this.currentDir][0];
			this.posY += SpriteMovement1[this.currentDir][1];
		}
		this.setPosition(this.posX, this.posY);
	};

	this.randomDirection = function()
	{
        	var ind = Math.floor(Math.random() * 4);
		var rnd = 0;
		var dir = MAZE.findDirections(this);
		var rd  = 0;

		do
		{
			rnd = RandomValues[this.number][ind];
			ind++;
			ind = (ind & 3);
			var xx = Math.abs(this.currentDir - rnd);
			var yy = ConvertDir[rnd] & dir;
			var zz = !((xx != 2) && (yy == ConvertDir[rnd]));
		} while (zz);

		switch (ConvertDir[rnd])
		{
			case 1: {rd = 0; break;}
			case 2: {rd = 1; break;}
			case 4: {rd = 2; break;}
			case 8: {rd = 3; break;}
		}
		return rd;
	};

	this.init();
};

AllScoresUp = function(pacman, level)
{
	this.alive       = [-1,-1,-1,-1,-1];
	this.ghostsEaten = 0;
	this.level       = level;
	this.pacman      = pacman;
	this.scores      = [200,400,800,1600,100,200,500,700,1000,1200,1500];
	this.scoresUp    = [null,null,null,null,null];

	this.init = function()
	{
		for (var x = 0; x < this.scoresUp.length; x++)
		{
			var s = new ScoresUp(x);
			this.scoresUp[x] = s;
		}
	};

	this.reset = function()
	{
		this.ghostsEaten = 0;
		for (var x = 0; x < this.scoresUp.length; x++)
		{
			this.alive[x] = -1;
			this.scoresUp[x].turnOff();
		}
	};

	this.showScoreUp = function(goodie)
	{
		if (goodie)
		{
			var i = Math.min(this.level.getLevelNumber(),6);
			SB.updateScore(1, (this.scores[(4+i)]));
			this.scoresUp[4].turnOn(this.pacman.left, this.pacman.top, i);
			this.alive[4] = SCORE_DELAY;
		}
		else
		{
			SB.updateScore(1, (this.scores[this.ghostsEaten]));
			this.scoresUp[this.ghostsEaten].turnOn(this.pacman.left, this.pacman.top, 0);
			this.alive[this.ghostsEaten] = SCORE_DELAY;
			this.ghostsEaten++;
		}
	};

	this.animate = function()
	{
		for (var x = 0; x < this.scoresUp.length; x++)
		{
			if (this.alive[x] > 0)
			{
				(this.alive[x])--;
				if (this.alive[x] == 0)
				{
					this.scoresUp[x].turnOff();
					this.alive[x] = -1;
				}
			}
		}
	};

	this.init();
};

ScoresUp = function(number)
{
	this.height  = 40;
	this.left    = -100;
	this.number  = number;
	this.object  = null;
	this.top     = -100;
	this.width   = 40;

	this.init = function()
	{
		this.object = document.createElement('img');
		this.object.id = 'ScoreUp' + this.number;
		this.object.style.position = 'absolute';
		this.object.style.left = this.left + 'px';
		this.object.style.top  = this.top  + 'px';
		this.object.style.align = 'baseline';
		this.object.style.border = '0';
		this.object.setAttribute('hspace','0');
		this.object.setAttribute('vspace','0');
		this.object.style.width  = this.width  + 'px';
		this.object.style.height = this.height + 'px';
		this.object.src='images/' + ScoresUpImages[this.number];
		this.object.style.zIndex = 15;
		this.object.alt="score up";
		mazeArea.appendChild(this.object);
	};

	this.setPosition = function(x,y)
	{
		this.top  = y;
		this.left = x;
		this.object.style.left = this.left + 'px';
		this.object.style.top  = this.top  + 'px';
	};

	this.turnOn = function(x,y,index)
	{
		var image = index;
		if (this.number == 4)
		{
			image = 4 + (image % 7);
		}
		else
		{
			image = this.number;
		}
		this.object.src='images/' + ScoresUpImages[image];
		this.setPosition(x,y);
	};

	this.turnOff = function()
	{
		this.setPosition(-100,-100);
	};

	this.init();
};

Game = function()
{
	this.counter = 1;
	this.status = gsGameOver;
	this.advanceLevel = false;

	this.init = function()
	{
		this.counter = 1;
		this.status = gsGameOver;
		this.advanceLevel = false;
	};

	this.updateCounter = function()
	{
		this.counter++;
		if (this.counter > 65535)
		{
			this.counter = 0;
		}
		if ((this.counter & 8191) == 0)
		{
			GD.turnOn();
		}
	};

	this.getCounter = function()
	{
		return this.counter;
	};

	this.getStatus = function()
	{
		return this.status;
	};

	this.setStatus = function(status)
	{
		this.status = status;
		switch (status)
		{
			case gsNewGame:
			{
				MSG.show(0,7000,function(){GAME.setStatus(gsPlay);});
				FX.start(SFX_NEWGAME);
				break;
			}

			case gsNewLevel:
			{
				MAZE.displayNextLevel(true);
				ST.updateGoodies(1);
				GS.reset();
				MSG.show(0,3000,function(){GAME.setStatus(gsPlay);});
				FX.start(SFX_NEWLEVEL);
				break;
			}

			case gsLevelCompleted:
			{
				this.advanceLevel = true;
				PM.setStatus(psInvisible);
				this.setStatus(gsFlashMaze);
				break;
			}

			case gsFlashMaze:
			{
				MAZE.flashMaze(0);
				break;
			}

			case gsFlashCompleted:
			{
				this.setStatus(gsScrollHome);
				break;
			}

			case gsScrollHome:
			{
				PM.setStatus(psInvisible);
				GD.turnOff(false);
				GS.setInvisible();
				break;
			}

			case gsScrollCompleted:
			{
				this.setStatus(gsReset);
				break;
			}

			case gsReset:
			{
				GD.turnOff(false);
				MAZE.resetDots();
				GS.reset();
				if (ST.getLives() < 0)
				{
					this.status = gsGameOver;
					MSG.show(1, 5000, reset);
					break;
				}
				else
				{
					this.setStatus(gsReady);
				}
				break;
			}

			case gsReady:
			{
				if (this.advanceLevel)
				{
					this.setStatus(gsNewLevel);
				}
				else
				{
					MSG.show(0,3000,function(){GAME.setStatus(gsPlay);});
				}
				break;
			}

			case gsPlay:
			{
				this.advanceLevel = false;
				MSG.hide();
				FX.resumeAll();
				PM.reset();
				break;
			}
		}
	};

	this.checkCollision = function(sprite1, sprite2)
	{
		var result = false;
		var c = Math.abs(sprite1.col  - sprite2.col);
		var r = Math.abs(sprite1.row  - sprite2.row);
		var l = Math.abs(sprite1.left - sprite2.left);
		var t = Math.abs(sprite1.top  - sprite2.top);

		if ((c <= 1) && (r <= 1) && (l <= 10) && (t <= 10))
		{
			result = true;
		}
		return result;
	};

	this.init();
};

FX   = new PlayFX();
GAME = new Game();
SB   = new Scoreboard();
ST   = new Status();
LL   = new Level();
MAZE = new Maze();
PM   = new PacManJr();
GS   = new AllGhosts(PM);
SU   = new AllScoresUp(PM,LL);
GD   = new Goodies();
MSG  = new Phrases();

function GameLoop()
{
	if (GAME.getStatus() == gsPlay)
	{
		GAME.updateCounter();
		PM.animate();
		GS.animate();
		GD.animate();
		SU.animate();
		MAZE.flashPowerPills();
		if (MAZE.isLevelComplete())
		{
			GD.turnOff(false);
			GS.setInvisible();
			GAME.setStatus(gsLevelCompleted);
		}
		ST.animateLives();
	}
	else if (GAME.getStatus() == gsScrollHome)
	{
		MAZE.scrollHome();
	}
};

function StartLoop()
{
	GAME.setStatus(gsNewGame);
	glTimer = window.setInterval("GameLoop();",8);
};

function ready()
{
	hideLoadingMessage();
	GAME.init();
	SB.init();
	ST.init();
	LL.reset();
	MAZE.reset();
	PM.reset();
	GS.reset();
	SU.reset();
	GD.turnOff(false);
	MSG.reset();
	stage.className  = "ready";
	splash.className = "ready";
	StartLoop();
	return false;
};

function reset()
{
	window.clearInterval(glTimer);
	stage.className  = "";
	splash.className = "";
	return false;
};

function showInstructions()
{
	splash.className = "ready";
	instruct.style.display="block";
	return false;
};

function hideInstructions()
{
	instruct.style.display="none";
	splash.className = "";
	hideLoadingMessage();
	return false;
};

function hideLoadingMessage()
{
	var loadingMessage = document.getElementById("loadingMessage");
	loadingMessage.style.display="none";
};
